@model IEnumerable<ModelLayer.Models.Employee>
@using ModelLayer.Models;
@{
    ViewBag.Title = "Index";

}

<div class="row">
    <div class="span12" id="divtable">
        <div class="widget">
            <div class="widget-header">
                <i class="icon-list-alt"></i>
                <h3> List [ Employee ]</h3>
            </div>
            <!-- /widget-header -->
            <div class="widget-content">
                <div class="widget big-stats-container">
                    <div class="widget-content matchdivheight">
                        <p>
                            @Html.ActionLink("Create New", "Create", null, new { @class = "btn btn-sm btn-primary" })
                        </p>
                            <table class="table table-striped table-bordered bootstrap-datatable  " id="tableSimilarProduct">
                                <thead>
                                    <tr>
                                        <th>
                                            @Html.DisplayNameFor(model => model.EmployeeCode)
                                        </th>
                                        <th>
                                            @Html.DisplayNameFor(model => model.OwnerID)
                                        </th>
                                        <th>
                                            @Html.DisplayNameFor(model => model.IsActive)
                                        </th>
                                        @*Hide EPOD from Ashish for Live*@
                                        @*<th style="width: 115px;">
                                            Role
                                        </th>
                                        <th style="width: 115px;">
                                            Login Status
                                        </th>*@
                                        <th></th>
                                    </tr>
                                </thead>

                                <tbody>
                                    @foreach (var item in Model)
                                    {
                                    <tr>
                                        <td class="center">@Html.DisplayFor(modelItem => item.EmployeeCode)</td>
                                        <td class="center">@Html.DisplayFor(modelItem => item.OwnerID)</td>
                                        <td class="center">@Html.DisplayFor(modelItem => item.IsActive, new { @class = "chkBox" })</td>
                                        @*Hide EPOD from Ashish for Live*@
                                        @*--- Using Role &  Login Status ---*@
                                        @*<td class="center">@Html.Label(item.DeviceID, new { id = item.ID})</td>
                                        <td class="center">@Html.Label(item.DeviceType, new { id = item.ID, @style = "background: #F9F9F9;width:40px;float:left" })</td>*@
                                        <td class="center">
                                            @Html.ActionLink("Edit", "Edit", new { id = item.ID }, new { @class = "btn btn-small btn-success" })
                                            @Html.ActionLink("Details", "Details", new { id = item.ID }, new { @class = "btn btn-small btn-primary" })
                                        </td>
                                    </tr>
                                    }
                                </tbody>


                            </table>
                    </div>
                    <!-- /widget-content -->
                </div>
            </div>
        </div>
    </div>
</div>

@*<script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script>

        $(function () {

            $.ajax({
                type: "POST",
                url: "/EmployeeManagement/EmployeeList",
                data: "{ businessTypeID: " + 0 + ",OwnerID:" + 0 + "}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                cache: false,
                success: function (msg) {

                    $.each(msg, function (index, item) {
                        //alert("1");

                        $("#tableSimilarProduct ").append("<tr>" +
                            "<td>" + item.EmployeeCode + "</td>" +
                            "<td>" + item.OwnerID + "</td>" +
                            "<td>" + item.IsActive + "</td>" +
                            "<td>" +
                            "<a class='btn btn-small grid-btn1' href='@Url.Action("Edit", "EmployeeManagement")?id=" + item.LoginID + "'> Edit </a> |" +
                            "<a class='btn btn-small grid-btn2' href='@Url.Action("Details", "EmployeeManagement")?id=" + item.LoginID + "'>Detail </a> |" +
                            "<a class='btn btn-small grid-btn3' href='@Url.Action("Delete", "EmployeeManagement")?id=" + item.LoginID + "'>Delete </a>"
                            + "</td> </tr>"
                        );
                    });
                },
                error: function (x, e) {
                    alert("Sorry No Unable to Bind Data. ");
                }

            });
        });




        $(function () {
            $('#BusinessOwner').change(function (e) {
                var selectedVal = $('#BusinessOwner option:selected').val();
                var selectOwner = $('#BusinessType option:selected').val();
                if (selectedVal > 0) {

                    $.ajax({
                        type: "POST",
                        url: "/EmployeeManagement/EmployeeList",
                        data: "{ businessTypeID: " + selectOwner + ",OwnerID:" + selectedVal + "}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        async: true,
                        cache: false,
                        success: function (msg) {
                            $('#tableSimilarProduct').empty();
                            $("#tableSimilarProduct ").append("<tr>" +
                                   "<th>EmployeeCode</th>" +
                                   "<th>OwnerID </th>" +
                                   "<th>IsActive </th>" +
                                   "<th></th> </tr>"
                                );
                            $.each(msg, function (index, item) {
                                $("#tableSimilarProduct ").append("<tr>" +
                                    "<td>" + item.EmployeeCode + "</td>" +
                                    "<td>" + item.OwnerID + "</td>" +
                                    "<td>" + item.IsActive + "</td>" +
                                    "<td>" +
                                    "<a href='@Url.Action("Edit", "EmployeeManagement")?id=" + item.LoginID + "'> Edit </a>" +
                                    "<a href='@Url.Action("Details", "EmployeeManagement")?id=" + item.LoginID + "'>Detail </a>" +
                                    "<a href='@Url.Action("Delete", "EmployeeManagement")?id=" + item.LoginID + "'>Delete </a>"
                                    + "</td> </tr>"
                                );
                            });
                        },
                        error: function (x, e) {
                            alert("Sorry No Unable to Bind Data. ");
                        }
                    });
                }

            });
        });



        $(function () {
            $('#BusinessType').change(function (e) {
                var selectedVal = $("#BusinessType option:selected").val();
                if (selectedVal > 0) {

                    $.ajax({
                        type: "POST",
                        url: "/EmployeeManagement/getOwnerID",
                        data: "{ businessTypeID: '" + selectedVal + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        async: true,
                        cache: false,
                        success: function (msg) {
                            $('#BusinessOwner').empty();
                            $('#BusinessOwner').append('<option value=0>Select Owner</option>');
                            $.each(msg, function (index, item) {
                                $('#BusinessOwner').append('<option value=' + item.ID + '>' + item.Name + '</option>');
                            });
                        },
                        error: function (x, e) {
                            alert("Sorry No Such Type of Owner Is available. ");
                        }
                    });
                }
            });
        });
    </script>*@

