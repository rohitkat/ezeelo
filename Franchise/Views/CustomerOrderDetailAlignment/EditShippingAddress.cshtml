@model ModelLayer.Models.CustomerOrder

@{
    ViewBag.Title = "EditShippingAddress";
    Layout = "~/Views/Shared/_Layout_franchise2.cshtml";
}
<style>
    .newlargecss {
        width: 80%;
        margin-left: 20px;
    }
    .rightbtn {
        margin-right: 54px!important;
    }
    .leftbtn {
        margin-left: 160px !important;
    }
    .newdropdown {
        width: 80.8%;
        margin-left: 20px;
    }
</style>
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
   <div class="widget">
    <div class="widget-header">
        <i class="icon-list-alt"></i>
        <h3>Customer Order [ @Model.OrderCode ]</h3>
    </div>
    <section class="content widget-content">
        <div class="row-fluid">
            <div class="col-md-12">
                <div class="form-horizontal">
                    @Html.ValidationSummary(true)
                    @Html.HiddenFor(model => model.ID)
                    @Html.HiddenFor(model=>model.PincodeID)
                    <div class="box-body">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Primary Mobile</label>
                            <div class="col-sm-10 control-group">
                                @Html.TextBoxFor(model => model.PrimaryMobile, new { @class = "newlargecss form-control", placeholder = "Primary Mobile", maxlength = 10, type = "number", required = "required" })
                                @Html.ValidationMessageFor(model => model.PrimaryMobile)
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Secondary Mobile</label>
                            <div class="col-sm-10 control-group">
                                @Html.TextBoxFor(model => model.SecondoryMobile, new { @class = "newlargecss form-control", placeholder = "Secondary Mobile", maxlength = 10, type = "number" })
                                @Html.ValidationMessageFor(model => model.SecondoryMobile)
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Shipping Address</label>
                            <div class="col-sm-10 control-group">
                                @Html.TextAreaFor(model => model.ShippingAddress, new { @class = "newlargecss form-control", placeholder = "Shipping Address", required = "required" })
                                @Html.ValidationMessageFor(model => model.ShippingAddress)
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label">Pincode</label>
                            <div class="col-sm-10 control-group">
                                @Html.TextBox("Pincode", null, new { @id = "Pincode", @class = "newlargecss form-control", @placeholder = "Enter Pincode", @onkeypress = "return isValidPincode(event)", maxlength = 6, type = "number", required = "required" })
                                <img id="Pincode_loading" src="~/Content/Images/ajax_loader.gif" style="width: 30px; height: 30px; display: none" />
                                <div id="divPincodeError" style="display: none; padding: 5px; margin-left: 159px;" class="alert alert-danger focused newlargecss">  </div>
                                @*<div class="row">
                                    <div class="col-lg-3 col-sm-6 col-xs-12">
                                        <div id="divPincodeError" style="display: none; padding:5px" class="alert alert-danger focused">  </div>
                                    </div>
                                </div>*@
                            </div>
                        </div>

                        <div id="divAddress">
                            @*to load Address Details*@
                        </div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label">Logs</label>
                            <div class="col-sm-10 control-group">
                                @Html.TextArea("Log", new { @class = "newlargecss form-control", placeholder = "Write Log", required="required" })
                            </div>
                        </div>

                    </div><!-- /.box-body -->
                    <div class="box-footer">
                        <button onclick="window.history.back();" class="btn btn-sm btn-primary leftbtn">Cancel</button>
                        <button type="submit" class="btn btn-sm btn-danger pull-right rightbtn">Update</button>
                    </div><!-- /.box-footer -->
                </div>
            </div>
        </div>
    </section>
</div>
}

<div>
    @*@Html.ActionLink("Back to List", "Index", "Home/#/CustomerOrderDetail?COID=11026")*@
    @*<a href="http://localhost:10567/#/CustomerOrderDetail?COID=11026">Back to list</a>*@
    @*<button onclick="window.history.back();">Back to list</a>*@
</div>

@section Myscripts{
    <script type="text/javascript">


        //----------------------------------------------------------------------For datepicker---//
        //<![CDATA[
        $(window).load(function () {
            //$('#DOB').datepicker('setDate', new Date());
            $('#DOB1').datepicker('update');
        });//]]>
        //----------------------------------------------------------------------To GetAddress From Pincode---//

        
        $('#Pincode').bind('input propertychange', function () {
            var lPincode = $('#Pincode').val()
            var lOldPincodeID = $('[id*=PincodeID]').val();
            $('#divPincodeError').hide();

            if (lPincode.length == 6) {
                $('#Pincode_loading').show();
                $.ajax({
                    url: '@Url.Action("GetAddress", "CustomerOrderDetailAlignment")?Pincode=' + lPincode + '&OldPincodeID=' + lOldPincodeID,
                    type: "GET",
                    success: function (result) {
                        $('#divAddress').html(result);
                        $('#Pincode_loading').hide();
                        $('#divPincodeError').hide();
                    },
                    error: function (data) {                        
                        //alert('Pincode : ' + lPincode + ' Dose Not Exist.');
                        $('#divAddress').empty();
                        $('#Pincode_loading').hide();
                        $('#divPincodeError').show();
                        $('#divPincodeError').html('Pincode [' + lPincode + '] dose not exist in current city!');
                        $('#Pincode').val('');
                    }
                });
            }
        });


        function isValidMobile(evt) {
            var charCode = (evt.which) ? evt.which : event.keyCode
            var l = $('#RegMobile').val().length + 1;

            if (charCode > 31 && (charCode < 48 || charCode > 57))
                return false;

            if (l > 10 && charCode != 8) {
                return false;
            }

            return true;
        }

        function isValidPincode(evt) {
            var charCode = (evt.which) ? evt.which : event.keyCode
            var l = $('#Pincode').val().length + 1;

            if (charCode > 31 && (charCode < 48 || charCode > 57))
                return false;

            if (l > 6 && charCode != 8) {
                return false;
            }

            return true;
        }


    </script>
}
