@using PagedList;
@using PagedList.Mvc;

@model IPagedList<ModelLayer.Models.ViewModel.Report.Account.ReportTransactionInputProcessAccountViewModel>

@{
    ViewBag.Title = "Index";
}
<style>
    .tbl th {
        border: solid 1px #808080 !important;
    }

    .tbl td {
        border: solid 1px #808080 !important;
    }
</style>
<div id="content" class="span10">
    <ul class="breadcrumb">
        <li>
            <a href="#">    Transaction Process Account/Index</a>
        </li>
    </ul>

    <div class="row-fluid">

        <div class="box span12">
            <div class="box-header">
                <h2><i class="icon-edit"></i><span class="break"></span>@Html.ActionLink("Create New", "Create")</h2>

            </div>
            <div class="box-content">

                @using (Html.BeginForm())
                {
                    @Html.AntiForgeryToken()

                    <table class="table">
                        <tr>
                            <td>From Date</td>
                            <td>@Html.TextBox("FromDate", null, new { id = "FromDate", @class = "datepicker glyphicons-iconcalendar", @placeholder = "Start Date", @style = "margin-top:-2px;", required = "requird" })</td>
                            <td>To Date</td>
                            <td>@Html.TextBox("ToDate", null, new { id = "ToDate", @class = "datepicker glyphicons-iconcalendar", @placeholder = "End Date", @style = "margin-top:-2px;", required = "requird" })</td>
                            @*<td class="text-right" style="width:100px;">Select Partner</td>
                                <td class="text-right" style="width:100px;">@Html.DropDownList("Franchise", "Select Partner")</td>*@
                            <td class="text-right" style="width:100px;"><input type="submit" name="btnSearchShop" value="Search" /></td>
                            @{
                    try
                    {
                        if (TempData["FranchiseID"] != null)
                        {
                            <td><a href="@Url.Action("ExportData", "ReportTransaction", new { pFranchiseID = TempData["FranchiseID"], FromDate = TempData["FromDate"].ToString(), ToDate = TempData["ToDate"].ToString() })" class="btn btn-warning btn-sm">Export</a></td>
                        }
                    }
                    catch (Exception ex)
                    { }
                            }

                        </tr>
                    </table>
                }


                <div class="row" style="width:100%; height:550px; overflow:scroll; margin:5px;">
                    <table class="table table-bordered table-condensed table-hover table-responsive table-striped tbl">
                        <tr>
                            <th>Sr.No</th>
                            <th>
                                OrderCode
                            </th>
                            <th>
                                Amount Received
                            </th>
                            <th>
                                LeadgerHead
                            </th>
                            <th>
                                Receipt Payment Mode
                            </th>
                            <th>
                                Paid By
                            </th>
                            <th>
                                POD Received
                            </th>
                            <th>
                                Narration
                            </th>
                            <th>
                                CreateDate
                            </th>
                            <th>
                                CreateBy
                            </th>
                            @*<th>Actions</th>*@
                        </tr>
                        @{ int i = 1;
                        }
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>@{int SrNo = ((ViewBag.PageNumber - 1) * ViewBag.PageSize) + i; i = i + 1; } @SrNo</td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.OrderCode)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Amount)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.LeadgerHead)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.ReceivedPaymentMode)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.ReceivedFromUser)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.PODReceived)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Narration)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.CreateDate)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.CreateByPersonalDetail)
                                </td>
                                @*<td>
                                    <a class="btn btn-success" href="@Url.Action("Edit", new { id = item.ID})">Edit</a>
                                </td>*@
                            </tr>
                        }

                    </table>
                    <div class="pager">
                        @Html.PagedListPager(Model, Page => Url.Action("TransactionByOrderGroup", new
                   {
                       page = Page,
                       SearchString = ViewBag.SearchString,
                       FromDate = ViewBag.FromDate,
                       ToDate = ViewBag.ToDate,
                       //OrderStatus = Request.QueryString["OrderStatus"]
                       //pShopID = Request.QueryString["pShopID"]
                   }),
                                                                new PagedListRenderOptions()
                                                                {
                                                                    Display = PagedListDisplayMode.IfNeeded
                                                                })
                    </div>
                </div>


                @{
                    TempData["FromDate"] = ViewBag.FromDate;
                    TempData["ToDate"] = ViewBag.ToDate;
                    TempData["Franchise"] = ViewBag.Franchise;
                }


            </div>
        </div><!--/span-->

    </div>

</div>
