@model  ModelLayer.Models.ViewModel.ProductUploadTempViewModelList

@{
    ViewBag.Title = "Index";
}

<style>
    .pro_th thead tr th {
        font-size: 12px;
        border-bottom: 1px solid #EEE;
        padding: 6px 0;
    }

    .pro_th tbody td {
        font-size: 12px;
        text-align: center;
        border: 1px solid #EEE;
    }

        .pro_th tbody td.btn-set {
            white-space: nowrap;
        }

    .dataTables_length {
        margin-left: 0px !important;
        margin-top: 7px;
    }

    .pagination {
        margin: 0 26px;
    }

    form {
        margin: 0 0 -15px;
    }
</style>

<link href="~/Content/css/Site.css" rel="stylesheet" />
<link href="~/Content/css/searching.css" rel="stylesheet" />
<link href="~/Content/css/sortable.css" rel="stylesheet" />


<script src="~/Content/js/jquery-1.11.1.min.js"></script>
@*<script src="~/Content/DataTable/lib/jspdf.debug.js"></script>
    <script src="~/Content/DataTable/lib/jspdf.js"></script>*@
<script src="~/Content/js/jQuery-Table-Plugin.js"></script>
<div id="content" class="span10" style="min-height: 403px;">
    <div class="row-fluid">
        <div class="box span12">
            <div class="box-header">
                <h2><i class="halflings-icon user"></i><span class="break"></span>List Of Product</h2>
            </div>
            <div class="box-content">
                @Html.DropDownList("FranchiseList", null, "Select Franchise Name", new { @Id = "franchiseID", style = "width:auto;" })
                @using (Html.BeginForm("Index1", "ProductUploadAproved", FormMethod.Get, new { id = "ediFilesForm" }))
                {
                    @*@Html.DropDownList("ShopId", "Select Shop Name")*@
                    @Html.DropDownList("ShopId", null, "Select Shop Name", new { @Id = "ShopId", onchange = "$('#ediFilesForm').submit()", name = "action:Index1", style = "width:auto;" })
                }

              <br />               
                    @Html.TextBox("SearchString", ViewBag.SearchString as string) @*, new { @class = "form-control" }*@
               
                    <button id="Search" type="submit" value="Search" class="btn btn-small btn-warning"> 
                        <strong><span class="glyphicon glyphicon-search"></span>Thorough Search</strong>              
                    </button>
                    


                    @if (Model != null)
                    {
                        if (Model.ProductUploadTempViewModelLIst != null)
                        {
                            <div class="div_class">
                                @*<select name="nazwa" class="quantity">
                            <option>10</option>
                            <option>20</option>
                            <option>30</option>
                            <option>40</option>
                            <option>50</option>
                        </select>
                        <div class="search_div">
                            <input type="text" class="search_input" placeholder="Search..." />
                            <a class="clearlink" title="Clear textbox"></a>
                        </div>*@

                                @*@using (Html.BeginForm("ApproveAllProducts", "ProductUploadAproved", Model, FormMethod.Post))*@
                                @using (Html.BeginForm("ApproveAllProducts", "ProductUploadAproved", FormMethod.Post))
                                {
                                    @*@Html.ActionLink("Approve", "ApproveAllProducts", Model)*@
                                    <input class="btn btn-small  btn-primary" id="btnCancel" type="submit" value="Approve/Disapprove" title="Remove" style="float: right;margin-bottom:5px;" />
                                    <table class="table table-striped table-bordered bootstrap-datatable datatable dataTable" width="100%">
                                        @for (var i = 0; i < Model.ProductUploadTempViewModelLIst.Count(); i++)
                                        {
                                            <thead>
                                                <tr>

                                                    <th>
                                                        Product Name

                                                    </th>

                                                    <th>
                                                        HSN Code    @*Added by Priti on 3/11/2018*@
                                                    </th>

                                                    <th>
                                                        EAN Code       @*Added by Priti on 3/11/2018*@
                                                    </th>

                                                    <th>
                                                        Quantity

                                                    </th>

                                                    <th>
                                                        Category Name

                                                    </th>
                                                    <th>
                                                        Brand Name

                                                    </th>
                                                    <th>
                                                        Product Varient(s)

                                                    </th>
                                                    <th> Shop Name</th>
                                                    <th>
                                                        Status
                                                        @Html.CheckBox("select_all", false)
                                                    </th>
                                                    <th></th>
                                                </tr>
                                            </thead>

                                            break;
                                        }
                                        <tbody>
                                            @if (Model.ProductUploadTempViewModelLIst.Count > 0)
                                            {
                                                foreach (var item in Model.ProductUploadTempViewModelLIst)
                                                {
                                                    <tr>
                                                        <td>
                                                            @item.Name
                                                            @*@Html.DisplayFor(modelItem => modelItem.ProductUploadTempViewModelLIst[i].Name)*@
                                                        </td>
                                                        <td>
                                                            @item.HSNCode
                                                        </td>
                                                        <td>
                                                            @item.EANCode    @*Added by Priti on 3/11/2018*@
                                                        </td>
                                                        <td align="center">
                                                            @item.Qty
                                                            @*@Html.DisplayFor(modelItem => modelItem.ProductUploadTempViewModelLIst[i].Qty)*@
                                                        </td>

                                                        <td>
                                                            @item.CategoryName
                                                            @*@Html.DisplayFor(modelItem => modelItem.ProductUploadTempViewModelLIst[i].CategoryName)*@
                                                        </td>
                                                        <td>
                                                            @item.BrandName
                                                            @*@Html.DisplayFor(modelItem => modelItem.ProductUploadTempViewModelLIst[i].BrandName)*@
                                                        </td>

                                                        <td>
                                                            @item.ProductVarientID
                                                            @*@Html.DisplayFor(modelItem => modelItem.ProductUploadTempViewModelLIst[i].ProductVarientID) Varient(s)*@
                                                        </td>
                                                        <td>
                                                            @item.ShopName
                                                            @*@Html.DisplayFor(modelItem => modelItem.ProductUploadTempViewModelLIst[i].ShopName)*@
                                                            @Html.HiddenFor(modelItem => @item.ShopID)
                                                        </td>
                                                        <td>
                                                            @Html.CheckBoxFor(modelItem => @item.IsActive, new { @class = "checkbox" })
                                                            @Html.HiddenFor(modelItem => @item.ID)
                                                        </td>
                                                        <td class="btn-set">


                                                            @Html.ActionLink("Edit", "Edit", new { id = @item.ID, shopID = @item.ShopID }, new { @class = "btn btn-small  btn-success" })

                                                            @*  @Html.ActionLink("Details", "Details1", new { id = Model.ProductUploadTempViewModelLIst[i].ID, ShopID = Model.ProductUploadTempViewModelLIst[i].ShopID }, new { @class = "btn btn-small btn-info" })*@

                                                            @Html.ActionLink("Add Component", "LoadVarient", new { productID = @item.ID, shopID = @item.ShopID }, new { @class = "btn btn-small btn-ceate" })
                                                        </td>
                                                    </tr>
                                                }
                                            }
                                            else
                                            {
                                                <tr>
                                                    <td colspan="8">
                                                        <center>No Records Found!</center>
                                                    </td>
                                                </tr>

                                            }
                                        </tbody>
                                    </table>

                                }
                                @*<div class="pagination_div"><a class="first_page">«« First </a><a class="prev_page">« Prev</a><span class="current_page">1</span><a class="next_page">Next »</a><a class="last_page">Last »»</a></div>*@

                            </div>

                        }

                    }

                </div>
        </div>
    </div>
</div>





@*<script src="~/Content/js/jquery-1.11.1.min.js"></script>*@
@*<script src="~/Content/js/jquery.dataTables.min.js"></script>*@
@*<link href="~/Content/css/jquery.dataTables.css" rel="stylesheet" />*@
@*<script src="~/Content/js/DataTable.js"></script>*@
@*<script type="text/javascript" charset="utf-8">
        $(document).ready(function () {
            $('#table').dataTable();
        });
    </script>*@
@*<script type="text/javascript">
        $(window).load(function () {
            var table = $(".table").html();
            //$(".table").add("aria-describedby", "DataTables_Table_0_info");
            //$(".table").add().attr("aria-describedby", "DataTables_Table_0_info");
            //$(".table thead th").add().attr("role", "columnheader");
            //$(".table thead th").add().attr("aria-controls", "DataTables_Table_0");
            //$(".table tbody tr:odd").addClass("odd");
            //$(".table tbody tr:even").addClass("even");
            //$(".table-responsive").append("<div id='DataTables_Table_0_filter' class='dataTables_filter'>" +
            //                            "<label>Search:" +
            //                            "<input type='text' aria-controls='DataTables_Table_0'>" +
            //                            "</label>" +
            //                               " </div>");
            alert(table);
        });
    </script>*@
<script type="text/javascript">


    $('#Search').on("click", function () {
        var SearchString = $("#SearchString").val();
        SearchString = SearchString.replace("+","_")
        var ShopID = $("select#ShopId option:selected").val();

        window.location = "/ProductUploadAproved/Index1?SearchString=" + SearchString + "&ShopId=" + ShopID;
    });


    $("#select_all").change(function () {  //"select all" change
        //alert(this.checked);
        var status = this.checked; // "select all" checked status
        $('.checkbox').each(function () { //iterate all listed checkbox items
            this.checked = status; //change ".checkbox" checked status
        });
    });


    $("select#franchiseID").bind('change', function () {
        var franchiseID = $("select#franchiseID option:selected").val();
        //alert(franchiseID);
        if (franchiseID == 0) {
            $('#ShopId').empty();
            return;
        }
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetMerchantByFranchiseId", "ProductApprovedNonApproved")',
            data: { 'franchiseID': franchiseID },
            //dataType: "json",
            cache: false,
            success: function (msg) {
                $('#ShopId').empty();
                $('#ShopId').append('<option value=0>Select Shop</option>');
                $.each(msg, function (index, item) {
                    $('#ShopId').append('<option value=' + item.MerchantID + '>' + item.MerchantName + '</option>');
                });
            },
            error: function (x, e) {
                alert('Failure');

            }
        });

    });

</script>

