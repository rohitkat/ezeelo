@model ModelLayer.Models.ViewModel.HomePageBlockItemsList

<style>
    .img_cat img {
        width: 50px;
        height: 50px;
    }
</style>
<style>
    .btn_Print {
        margin-bottom: 7px;
        margin-top: 7px;
        margin-left: 5px;
    }

    .section {
        position: relative;
        border: 1px solid #000;
        padding-top: 0px;
        margin-left: 5px;
        margin-top: 2px;
        background: #fff;
    }

        .section.positioned {
            position: absolute;
            top: 100px;
            left: 100px;
            width: 800px;
            box-shadow: 0 0 15px #333;
        }

    .container_tbl {
        overflow-y: scroll;
        height: 408px;
        margin-top: 29px;
    }

    table {
        border-spacing: 0;
        width: 100%;
        padding-bottom: 0px !important;
    }

    td + td {
        border-left: 1px solid #eee;
    }

    td, th {
        border-bottom: 1px solid #eee;
        color: #000;
        padding: 10px 25px;
    }

    #myTable thead tr th {
        height: 0;
        line-height: 0 !important;
        padding-top: 0 !important;
        padding-bottom: 0 !important;
        color: transparent;
        border: none;
        white-space: nowrap;
    }

    th div {
        position: absolute;
        background: transparent;
        color: #222;
        padding: 9px 10px;
        top: 0;
        margin-left: -8px;
        line-height: normal;
        border-left: 1px solid #DDD;
    }

    th:first-child div {
        border: none;
    }

    .wrap {
        margin-top: 105px;
    }

    td:nth-child(1) {
        max-width: 3px;
        word-wrap: break-word;
    }

    td:nth-child(2) {
        max-width: 1px;
        word-wrap: break-word;
    }

    td:nth-child(3) {
        max-width: 41px;
        word-wrap: break-word;
    }

    td:nth-child(4) {
        max-width: 57px;
        word-wrap: break-word;
    }

    td:nth-child(5) {
        max-width: 3px;
        word-wrap: break-word;
    }

    td:nth-child(6) {
        max-width: 2px;
        word-wrap: break-word;
    }

    td:nth-child(7) {
        max-width: 2px;
        word-wrap: break-word;
    }

    td:nth-child(8) {
        max-width: 2px;
        word-wrap: break-word;
    }
</style>

@using (Html.BeginForm("UpdateSequence", "HomePageBlocksItem"))
{
    <div>
        <div class="form-actions" style="clear:both;">
            <input type="submit" name="submit" id="btnSubmit" class="btn btn-success" />
            @Html.ActionLink("Back to List", "Index", string.Empty, new { @class = "btn btn-brown" })
        </div>
        <div style="color:red; font-weight:bold;">
            <marquee behavior="alternate">Note:-  UP/DOWN Priority Will only Affected After Submit</marquee>
        </div>

        @if (ViewBag.Franchise != null)
        {
            @Html.Hidden("Franchise", (Int32)ViewBag.Franchise)
        }
        @if (ViewBag.BlockType != null)
        {
            @Html.Hidden("BlockType", (Int64)ViewBag.BlockType)
        }

        <div class=" section">
            <div class="table  scrollable container_tbl">
                <div style="width:100%; margin-top:10px;"></div>
                <table class="table scroll" id="myTable">
                    <thead>
                        <tr class="header" id="toptr">
                            <th>
                                <div>Sequence</div>
                            </th>
                            <th>
                                <div>Image</div>
                            </th>
                            <th>
                                <div>URL</div>
                            </th>
                            <th>
                                <div>ToolTip</div>
                            </th>
                            <th><div>Is Active</div></th>

                            <th><div>Up</div></th>
                            <th><div>Down</div></th>
                            <th><div>Action</div></th>
                        </tr>
                    </thead>

                    @for (int i = 0; i < Model.blockItemsList.Count; i++)
                    {

                        <tr>
                            <td class="shopPriority">

                                @Html.HiddenFor(x => x.blockItemsList[i].ID)
                                @Html.HiddenFor(x => x.blockItemsList[i].SequenceOrder)
                                @Html.DisplayFor(x => x.blockItemsList[i].SequenceOrder)

                            </td>
                            <td class="img_cat">
                                <img src="@Model.blockItemsList[i].ImageName" onerror="this.src = '../../Content/Images/No_thumbnail.png'" />
                            </td>
                            <td class="shop">
                                @Html.DisplayFor(x => x.blockItemsList[i].LinkUrl)
                            </td>
                            <td class="shop">
                                @Html.DisplayFor(x => x.blockItemsList[i].Tooltip)
                            </td>
                            <td>
                                @Html.DisplayFor(x => x.blockItemsList[i].IsActive)
                            </td>
                            <td> <a href="#noname" class='up'>Up</a></td>
                            <td> <a href="#noname" class='down'>Down</a></td>

                            <td>
                                @Html.ActionLink("Details", "Details", new { id = Model.blockItemsList[i].ID }, new { @class = "btn btn-small btn-primary" })
                            </td>
                        </tr>
                    }


                </table>

            </div>
        </div>

        <div class="form-actions">
            <input type="submit" name="submit" id="btnSubmit" class="btn btn-success" />
            @Html.ActionLink("Back to List", "Index", string.Empty, new { @class = "btn btn-brown" })
        </div>
    </div>

}




@*<script src="~/Scripts/jquery-1.10.2.min.js"></script>*@
<script>
    $(document).ready(function () {

        $(".up,.down").click(function () {

            var $element = this;
            var row = $($element).parents("tr:first");
            var val = $($element).parents("tr:first").children("td:first").text();

            if ($(this).is('.up')) {
                $('.table').find('tr').removeAttr('style');

                if (row.prev('tr').html() != undefined) {

                    var ID = row.children("td:nth-child(1)").find("[id*=ID]").val();
                    var ImageName = row.children("td:nth-child(2)").html();
                    var Actions = row.children("td:nth-child(8)").html();
                    var LinkUrl = row.children("td:nth-child(3)").html();
                    var ToolTip = row.children("td:nth-child(4)").html();
                    var IsActive = row.children("td:nth-child(5)").find(".check-box").prop('checked');

                    var prevID = row.prev().children("td:nth-child(1)").find("[id*=ID]").val();
                    var prevImageName = row.prev().children("td:nth-child(2)").html();
                    var prevActions = row.prev().children("td:nth-child(8)").html();
                    var prevLinkUrl = row.prev().children("td:nth-child(3)").html();
                    var prevToolTip = row.prev().children("td:nth-child(4)").html();
                    var prevIsActive = row.prev().children("td:nth-child(5)").find(".check-box").prop('checked');

                    row.children("td:nth-child(1)").find("[id*=ID]").val(prevID);
                    row.children("td:nth-child(2)").html(prevImageName);
                    row.children("td:nth-child(8)").html(prevActions);
                    row.children("td:nth-child(3)").html(prevLinkUrl);
                    row.children("td:nth-child(4)").html(prevToolTip);
                    row.children("td:nth-child(5)").find(".check-box").prop('checked', prevIsActive);

                    row.prev().children("td:nth-child(1)").find("[id*=ID]").val(ID);
                    row.prev().children("td:nth-child(2)").html(ImageName);
                    row.prev().children("td:nth-child(8)").html(Actions);
                    row.prev().children("td:nth-child(3)").html(LinkUrl);
                    row.prev().children("td:nth-child(4)").html(ToolTip);
                    row.prev().children("td:nth-child(5)").find(".check-box").prop('checked', IsActive);
                    row.prev('tr').css('background-color', '#ace8a9');
                }
            }
            else {

                $('.table').find('tr').removeAttr('style');
                if ($(this).parents().not("tr:last")) {
                    if (row.next('tr').html() != undefined) {

                        var ID = row.children("td:nth-child(1)").find("[id*=ID]").val();
                        var ImageName = row.children("td:nth-child(2)").html();
                        var Actions = row.children("td:nth-child(8)").html();
                        var LinkUrl = row.children("td:nth-child(3)").html();
                        var ToolTip = row.children("td:nth-child(4)").html();
                        var IsActive = row.children("td:nth-child(5)").find(".check-box").prop('checked');

                        var nextID = row.next().children("td:nth-child(1)").find("[id*=ID]").val();
                        var nextImageName = row.next().children("td:nth-child(2)").html();
                        var nextActions = row.next().children("td:nth-child(8)").html();
                        var nextLinkUrl = row.next().children("td:nth-child(3)").html();
                        var nextToolTip = row.next().children("td:nth-child(4)").html();
                        var nextIsActive = row.next().children("td:nth-child(5)").find(".check-box").prop('checked');

                        row.children("td:nth-child(1)").find("[id*=ID]").val(nextID);
                        row.children("td:nth-child(2)").html(nextImageName);
                        row.children("td:nth-child(8)").html(nextActions);
                        row.children("td:nth-child(3)").html(nextLinkUrl);
                        row.children("td:nth-child(4)").html(nextToolTip);
                        row.children("td:nth-child(5)").find(".check-box").prop('checked', nextIsActive);

                        row.next().children("td:nth-child(1)").find("[id*=ID]").val(ID);
                        row.next().children("td:nth-child(2)").html(ImageName);
                        row.next().children("td:nth-child(8)").html(Actions);
                        row.next().children("td:nth-child(3)").html(LinkUrl);
                        row.next().children("td:nth-child(4)").html(ToolTip);
                        row.next().children("td:nth-child(5)").find(".check-box").prop('checked', IsActive);
                        row.next('tr').css('background-color', '#ace8a9');

                    }
                }
            }
        });

    });

</script>
<script src="~/Content/js/custom.js"></script>
<script src="~/Content/js/jquery.dataTables.min.js"></script>


