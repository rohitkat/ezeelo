@model IEnumerable<ModelLayer.Models.ViewModel.Report.Account.TransactionByShopGroupViewModel>

@{
    ViewBag.Title = "TransactionByShopGroup";
}

<style>
    .tbl th {
        border: solid 1px #808080 !important;
    }

    .tbl td {
        border: solid 1px #808080 !important;
    }
</style>
<div class="row-fluid" style="margin-top:20px;margin-left:15px;">
    <div class="box span12">
        <div class="box-header">
            <h2><i class="icon-edit"></i><span class="break"></span>Transaction By Shop</h2>
        </div>
        <div class="box-content">
            @using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()

                <table class="table">
                    <tr>
                        <td>@Html.TextBox("FromDate", null, new { id = "FromDate", @class = "datepicker glyphicons-iconcalendar", @placeholder = "Start Date", @style = "margin-top:-2px;", required = "requird" })</td>

                        <td>@Html.TextBox("ToDate", null, new { id = "ToDate", @class = "datepicker glyphicons-iconcalendar", @placeholder = "End Date", @style = "margin-top:-2px;", required = "requird" })</td>

                        <td class="text-right" style="width:100px;">@Html.DropDownList("Franchise", "Select Partner")</td>
                        <td class="text-right" style="width:100px;"><input type="submit" name="btnSearchShop" value="Search Shop" class="btn btn-small btn-primary" style="margin-top:4px;" /></td>


                        @{
                try
                {
                    if (TempData["FranchiseID"] != null)
                    {
                        <td><a href="@Url.Action("ExportData", "ReportTransaction", new { pIsExportSummary = true, pFranchiseID = TempData["FranchiseID"], FromDate = TempData["FromDate"].ToString(), ToDate = TempData["ToDate"].ToString() })" class="btn btn-warning btn-small " style="margin-top:4px;">Export</a></td>
                    }
                }
                catch (Exception ex)
                { }
                        }


                    </tr>
                </table>
            }

            <div class="row" style="width:100%; height:550px; overflow:scroll; margin:5px;">
                <table class="table table-bordered table-condensed table-hover table-responsive table-striped tbl">
                    <tr>
                        <th>Sr.No</th>
                        <th>
                            Shop
                        </th>
                        <th>
                            Qty Asked By Customer
                        </th>
                        <th>
                            Qty Shop Out
                        </th>
                        <th>
                            Total MRP
                        </th>
                        <th>
                            Total Sale Rate
                        </th>
                        <th>
                            Shop Total Offer
                        </th>
                        <th>
                            New Sale Rate After Offer
                        </th>
                        <th>
                            Total Shop Final Price
                        </th>
                        <th>
                            Shop Receivable
                        </th>
                        <th>
                            Is Shop Handle Other TAX
                        </th>
                        <th>
                            Other TAX Payable Receivable From Merchant
                        </th>
                        <th>
                            Sum Of Amount Shop Receivable After Other TAX
                        </th>
                        <th>
                            GB Receivable Amount
                        </th>
                        <th>
                            GB Transaction Fee
                        </th>
                        <th>
                            GB Service TAX On Transaction Fee
                        </th>
                        <th>
                            Final Shop Receivable After All Done
                        </th>
                        <th>
                            Process Remark
                        </th>
                    </tr>

                    @{ int lSrNo = 1; }
                    @foreach (var item in Model.OrderBy(x => x.ShopName.Trim()))
                    {
                        <tr>
                            <td>@lSrNo @{ lSrNo++; }</td>
                            <td>
                                <a href="@Url.Action("TransactionDetail", "ReportTransaction", new { pShopID = item.ShopID })">@Html.DisplayFor(modelItem => item.ShopName)</a>
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.QtyAskedByCustomer)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.QtyShopOut)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.TotalMRP)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.TotalSaleRate)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ShopTotalOffer)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.NewSaleRateAfterOffer)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.TotalShopFinalPrice)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ShopReceivable)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.IsShopHandleOtherTAX1)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.OtherTAXPayableReceivableFromMerchant)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.SumOfAmountShopReceivableAfterOtherTAX)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.GBReceivableAmount)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.GBTransactionFee)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.GBServiceTAXOnTransactionFee)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.FinalShopReceivableAfterAllDone)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ProcessRemark)
                            </td>
                        </tr>
                    }
                </table>
            </div>

            @{
                TempData["FromDate"] = ViewBag.FromDate;
                TempData["ToDate"] = ViewBag.ToDate;
                TempData["Franchise"] = ViewBag.Franchise;
            }


        </div>
    </div>
</div>@*@ViewBag.FromDate - @ViewBag.ToDate*@
@*<p>
        @ViewBag.lFromDate - @ViewBag.lToDate
    </p>*@


@*@section MyScripts{*@
<script>
    //----------------------------------------------------------------------For datepicker---//
    //<![CDATA[
    $(window).load(function () {
        //$('#DOB').datepicker('setDate', new Date());
        $('#FromDate').datepicker('update');
        $('#ToDate').datepicker('update');
    });//]]>

</script>
@*}*@
