@model ModelLayer.Models.ViewModel.InvoiceViewModel
@using ModelLayer.Models.ViewModel

@{
    ViewBag.Title = "Details";
}

<link href="~/Content/assets/css/font-awesome.min.css" rel="stylesheet" />

<div id="content" class="span10">
    <div class="row-fluid">
        <div class="box span12">
            <div class="box-header creatProduct clearfix" data-original-title="">
                <h2>
                    <i class="icon-exclamation-sign"></i>
                    <span class="break"></span>
                    INVOICE DETAIL [@Model.InvoiceCode]
                </h2>
            </div>
            <div class="box-content">
                <div class="form-horizontal">
                    <div class="display-label">Warehouse Name: <b>@Model.WarehouseName</b></div>
                    <div class="display-label">Supplier Name: <b>@Model.SupplierName</b></div>
                    <div class="display-label">Invoice Date: <b>@Model.InvoiceDate.ToString("dd MMM yyyy")</b></div>
                    <div class="display-label">Invoice Amount: <b><i class="fa fa-inr"></i> @Model.OrderAmount</b></div>
                    <div class="display-label">Total Amount: <b><i class="fa fa-inr"></i> @Model.TotalAmount</b></div>
                    <div class="display-label"><b>@ViewBag.SelectedDvName</b></div>
                </div>
            </div>
        </div>

        <div class="box">
            <div class="box-header creatProduct clearfix" data-original-title="">
                <h2>
                    <i class="icon-exclamation-sign"></i>
                    <span class="break"></span>
                    ADDED ITEM(S)
                </h2>
            </div>
            <div class="box-content nameDscrp">
                <div class="NameDescription">
                    <div class="box-content box-content1" style="padding-left:0px;width:99%;overflow-x:scroll;z-index:1;">

                        <div class="box-content">
                            <table id="tbl" class="table table-striped table-bordered bootstrap-datatable datatable dataTable" width="100%">
                                <tr>
                                    <th>Product</th>
                                    <th>Item</th>
                                    <th>HSN Code</th>
                                    <th>Received Quantity</th>
                                    <th>BuyRatePerUnit</th>
                                    <th>SaleRate</th>
                                    <th>MRP</th>
                                    <th>CGST </th>
                                    <th>SGST</th>
                                    @*<th>IGST</th>*@
                                    <th>Amount</th>
                                    @*<th>Reorder Level</th>*@
                                    <th>Item Expiry Date</th>
                                    <th>Remark</th>
                                </tr>
                                @{
                                    decimal TotalGSTAmount = 0;
                                }
                                @*@foreach (var item in Model)*@
                                @for (int i = 0; i < Model.lInvoiceDetailViewModels.Count; i++)
                                {
                                    <tr>
                                        <td class="table-shopping-cart-img" style="text-align: left;">
                                            <img id=" imgproductimage" src="@Model.lInvoiceDetailViewModels[i].StockThumbPath" onerror="this.src = '/Content/Images/no_image.png'" style="width: 70px; height:70px;" alt=" eZeelo " />
                                        </td>
                                        <td>
                                            @Model.lInvoiceDetailViewModels[i].ItemName
                                        </td>
                                        <td>@Model.lInvoiceDetailViewModels[i].HSNCode</td>
                                        <td>@Html.LabelFor(model => @Model.lInvoiceDetailViewModels[i].ReceivedQuantity, @Model.lInvoiceDetailViewModels[i].ReceivedQuantity.ToString(), new { Style = "width:30px" })</td>
                                        <td>
                                            @Html.LabelFor(model => @Model.lInvoiceDetailViewModels[i].BuyRatePerUnit, @Model.lInvoiceDetailViewModels[i].BuyRatePerUnit.ToString(), new { Style = "width:40px" })
                                            @Html.HiddenFor(model => @Model.lInvoiceDetailViewModels[i].BuyRatePerUnit)
                                        </td>
                                        <td>@Html.LabelFor(model => @Model.lInvoiceDetailViewModels[i].SaleRate, @Model.lInvoiceDetailViewModels[i].SaleRate.ToString(), new { Style = "width:40px" })</td>
                                        <td>@Html.LabelFor(model => @Model.lInvoiceDetailViewModels[i].MRP, @Model.lInvoiceDetailViewModels[i].MRP.ToString(), new { Style = "width:40px" })</td>

                                        <td>
                                            @Html.LabelFor(model => @Model.lInvoiceDetailViewModels[i].CGSTAmount, @Model.lInvoiceDetailViewModels[i].CGSTAmount.ToString(), new { Style = "width:40px" })
                                        <span>(@Convert.ToDecimal(@Model.lInvoiceDetailViewModels[i].GSTInPer / Convert.ToDecimal(2))%)</span>
                                    </td>

                                    <td>
                                        @Html.LabelFor(model => @Model.lInvoiceDetailViewModels[i].SGSTAmount, @Model.lInvoiceDetailViewModels[i].SGSTAmount.ToString(), new { Style = "width:40px" })
                                    <span>(@Convert.ToDecimal(@Model.lInvoiceDetailViewModels[i].GSTInPer / Convert.ToDecimal(2))%)</span>
                                </td>
                                @*<td>@Html.LabelFor(model => @Model.lInvoiceDetailViewModels[i].IGSTAmount, @Model.lInvoiceDetailViewModels[i].IGSTAmount.ToString(), new { Style = "width:40px" })</td>*@
                                <td>@Html.LabelFor(model => @Model.lInvoiceDetailViewModels[i].Amount, @Model.lInvoiceDetailViewModels[i].Amount.ToString(), new { Style = "width:40px" })</td>
                                @*<td>
                                        @Html.TextBoxFor(model => @Model.lInvoiceDetailViewModels[i].ReorderLevel, @Model.lInvoiceDetailViewModels[i].ReorderLevel.ToString(), new { placeholder = "0", Style = "width:40px" })
                                    </td>*@
                                <td>
                                    @Html.LabelFor(model => @Model.lInvoiceDetailViewModels[i].ExpiryDate, @Convert.ToDateTime(@Model.lInvoiceDetailViewModels[i].ExpiryDate).ToString("dd MMM yyyy"), new { Style = "width:70px" })
                                </td>
                                <td>
                                    @Html.LabelFor(model => @Model.lInvoiceDetailViewModels[i].Remark, @Model.lInvoiceDetailViewModels[i].Remark, new { placeholder = "Remark", Style = "width:180px" })
                                </td>
                            </tr>
                                    TotalGSTAmount = TotalGSTAmount + Convert.ToDecimal(@Model.lInvoiceDetailViewModels[i].CGSTAmount) + Convert.ToDecimal(@Model.lInvoiceDetailViewModels[i].SGSTAmount);
                                }
                            </table>
                        </div>
                    </div>
                </div>

                <div>
                    <table width="100%">
                        <tr>
                            <td style="width:60%;" valign="top"><b>Remarks</b> <br />@Model.Remark</td>

                            <td style="width:50%; text-align:right">
                                <table width="100%">
                                    <tr>
                                        <td style="text-align:right">
                                            SUBTOTAL
                                        </td>
                                        <td><b>: </b></td>
                                        <td style="text-align: right; width: 30%;padding-right:20px">
                                            @*<span> <b> <i class="fa fa-inr"></i> @Model.OrderAmount </b></span>*@
                                            @*Yashaswi 6-7-2018 *@
                                            <span> <b> <i class="fa fa-inr"></i> @Convert.ToDecimal(@ViewBag.Subtotal - @TotalGSTAmount)  </b></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:right">GST</td>
                                        <td><b>: </b></td>
                                        <td style="text-align: right; width: 30%; padding-right: 20px; "><span>  <b> <i class="fa fa-inr"></i> @TotalGSTAmount </b></span><br /></td>
                                    </tr>
                                    @if (@Model.ShippingCharge > 0)
                                    {
                                        <tr>
                                            <td style="text-align:right">SHIPPING CHARGE</td>
                                            <td><b>: </b></td>
                                            <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.ShippingCharge </b></span><br /></td>
                                        </tr>
                                    }
                                    @if (@Model.AdditionalCost > 0)
                                    {
                                        <tr>
                                            <td style="text-align:right">ADDITIONAL COST</td>
                                            <td><b>: </b></td>
                                            <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.AdditionalCost</b> </span><br /></td>
                                        </tr>
                                    }
                                    @if (@Model.CustomDutyCharge > 0)
                                    {
                                        <tr>
                                            <td style="text-align:right">CUSTOM DUTY CHARGE</td>
                                            <td><b>: </b></td>
                                            <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.CustomDutyCharge</b> </span><br /></td>
                                        </tr>
                                    }
                                    @if (@Model.OperatingCost > 0)
                                    {
                                        <tr>
                                            <td style="text-align:right">OPERATING COST</td>
                                            <td><b>: </b></td>
                                            <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.OperatingCost</b> </span><br /></td>
                                        </tr>
                                    }
                                    @if (@Model.TotalDiscountAmount > 0)
                                    {
                                        <tr>
                                            <td style="text-align:right">TOTAL DISCOUNT AMOUNT</td>
                                            <td><b>: </b></td>
                                            <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.TotalDiscountAmount</b> </span><br /></td>
                                        </tr>
                                    }
                                    <tr>
                                        <td style="text-align:right"><b>TOTAL</b></td>
                                        <td><b>: </b></td>
                                        <td style="text-align: right; width: 30%; padding-right: 20px; "><span> <b>  <i class="fa fa-inr"></i> @Model.TotalAmount</b> </span></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td><b> Attachment </b></td>
                            <td>@if (Model.Invoice_Attachment != null)
{ <div class="display-label"><a class="submenu" style="color:blue;cursor:pointer" href=@Url.Action("Download", new { fileName = Model.Invoice_AttachmentFileName }) id="btnRate"><span class="hidden-tablet">DownLoad Attachment -> @Model.Invoice_AttachmentFileName</span></a></div>}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <br />
        <p>
            @*@Html.ActionLink("Edit", "Edit", new { id = Model.PurchaseOrderID }, new { @class = "btn btn-success mrg-left mrg-top" })*@
            @Html.ActionLink("Back to List", "Index", new { PurchaseOrderID = ViewBag.PurchaseOrderID }, new { @class = "btn btn-default mrg-left mrg-top" })
        </p>

    </div>
</div>
