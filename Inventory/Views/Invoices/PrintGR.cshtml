@model ModelLayer.Models.ViewModel.InvoiceViewModel
@using ModelLayer.Models.ViewModel

@{
    Layout = null;
    ViewBag.Title = "Good Receipt Note";
}


<script src="~/Content/js/jquery-1.11.0.min.js"></script>
<link href="~/Content/assets/css/style.css" rel="stylesheet" />
<script src="~/Content/js/jquery-1.9.1.min.js"></script>
<link href="http://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
<link href="~/Content/assets/css/form-design.css" rel="stylesheet" />
@*<link href="~/Content/assets/css/font-awesome.min.css" rel="stylesheet" />*@
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />


<link href="~/Content/css/site.css" rel="stylesheet" />
<link href="~/Content/css/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/css/bootstrap-responsive.min.css" rel="stylesheet" />

<link href="~/Content/css/style-responsive.css" rel="stylesheet" />
<link href="~/Content/css/halflings.css" rel="stylesheet" />
<link href="~/Content/css/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
<link href="~/Content/css/jquery.cleditor.css" rel="stylesheet" />
<link href="~/Content/css/uniform.default.css" rel="stylesheet" />

<div>
    <div style="position:fixed; text-align:right; padding-left:20px">
        <input class="btn btn-primary" type="button" value="Print" id="btnPrint" />
    </div>
    <div id="dvContainer" style="padding-left: 50px; padding-right: 50px; border: solid 1px black">
        <div class="row-fluid">
            <div class="box span12">
                <div class="box-header" data-original-title="" style="text-align:center">
                    <h2>
                        GOODS RECEIVED NOTE
                    </h2>
                </div>
                <div class="box-content">
                    <div class="form-horizontal">
                        <table width="100%">
                            <tr>
                                <td style="padding-left: 10px; width: 40%">                                   
                                    <br />
                                   
                                    <div class="display-label" style="font-size:x-large; color:navy"><b>@Model.SupplierName</b> </div>
                                    <div class="display-label">@Model.SupplierAddress </div>
                                    <div class="display-label"><i class="fa fa-phone"></i> @Model.SupplierMobile</div>
                                    <div class="display-label"><i class="fa fa-fax"></i> Fax :@Model.SupplierFax</div>
                                    <div class="display-label"><i class="fa fa-envelope"></i> @Model.SupplierEmail</div>
                                    <div class="display-label">GST No. @Model.SupplierGSTNumber</div>
                                </td>
                                <td style="text-align: left; width: 40%"></td>
                                <td style="text-align: left; width: 40%">
                                    <div class="display-label">Invoice No: <b>@Model.InvoiceCode</b></div>
                                    <div class="display-label">Ref. PO No: <b>@Model.PurchaseOrderCode</b></div>
                                    <div class="display-label">Invoice Date: <b>@Model.InvoiceDate.ToString("dd MMM yyyy")</b></div>
                                </td>
                            </tr>
                        </table>
                        <hr />
                    </div>
                </div>
            </div>                      


            <div class="box">
                <div class="box-header creatProduct" data-original-title="">
                    <h2></h2>
                </div>
                <div class="box-content">
                    <div class="NameDescription">
                        <div class="box-content box-content1" style="padding-left:0px;width:99%;z-index:1;">

                            <table class="table table-striped table-bordered bootstrap-datatable datatable dataTable items" width="100%" cellpadding="1" cellspacing="0" border="1">
                                <tr>
                                    <th>Sr.No.</th>
                                    <th>Product</th>
                                    <th style="text-align:left">Item Description</th>
                                    <th>HSN Code</th>
                                    <th style="text-align:center">Quantity</th>
                                    <th style="text-align:center">Unit Price</th>
                                    <th>CGST</th>
                                    <th>SGST</th>
                                    @*<th>IGSTAmount</th>*@
                                    <th style="text-align:center">Amount</th>
                                    @*<th>Remark</th>*@
                                </tr>
                                @{
                                    var srno = 1;
                                    decimal TotalGSTAmount = 0;
                                    decimal total = 0;
                                }
                                @for (int i = 0; i < Model.lInvoiceDetailViewModels.Count; i++)
                                {
                                    <tr>
                                        <td>
                                            @srno
                                            @{ srno = srno + 1; }
                                        </td>
                                        <td class="table-shopping-cart-img" style="text-align: left;">
                                                <img id=" imgproductimage" src="@Model.lInvoiceDetailViewModels[i].StockThumbPath" onerror="this.src = '/Content/Images/no_image.png'" style="width: 70px; height:70px;" alt=" eZeelo " />
                                            </td>
                                        <td>
                                            @Model.lInvoiceDetailViewModels[i].ItemName
                                        </td>
                                        <td>@Model.lInvoiceDetailViewModels[i].HSNCode</td>
                                        <td style="text-align:center">
                                            @Model.lInvoiceDetailViewModels[i].ReceivedQuantity
                                        </td>
                                        <td>
                                             @Model.lInvoiceDetailViewModels[i].BuyRatePerUnit
                                        </td>
                                        <td>
                                            @Model.lInvoiceDetailViewModels[i].CGSTAmount                                          
                                            <span>(@Convert.ToDecimal(@Model.lInvoiceDetailViewModels[i].GSTInPer / Convert.ToDecimal(2))%)</span>

                                        </td>
                                        <td>
                                            @Model.lInvoiceDetailViewModels[i].SGSTAmount                                          
                                            <span>(@Convert.ToDecimal(@Model.lInvoiceDetailViewModels[i].GSTInPer / Convert.ToDecimal(2))%)</span>
                                        </td>
                                        @*<td>
                                            @Html.LabelFor(model => @Model.lInvoiceDetailViewModels[i].IGSTAmount, @Model.lInvoiceDetailViewModels[i].IGSTAmount.ToString())
                                            @Html.HiddenFor(model => @Model.lInvoiceDetailViewModels[i].IGSTAmount)
                                        </td>*@
                                        <td style="font-weight:bold"><b>@Model.lInvoiceDetailViewModels[i].ProductAmount</b></td>
                                        @*<td>
                                                @Html.LabelFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].ProductRemark, Convert.ToString(@Model.lPurchaseOrderReplyDetailViewModels[i].ProductRemark), new { Style = "width:180px" })
                                            </td>*@
                                    </tr>
                                   
                                    TotalGSTAmount = TotalGSTAmount + Convert.ToDecimal(@Model.lInvoiceDetailViewModels[i].CGSTAmount) + Convert.ToDecimal(@Model.lInvoiceDetailViewModels[i].SGSTAmount);
                            
                                    
                                }
                            </table>
                        </div>
                        <div>
                            <table width="100%">
                                <tr>
                                    <td style="width:50%;" valign="top"><b>Remarks</b> <br />@Model.Remark</td>
                                    <td style="width:50%; text-align:right">
                                        <table width="100%">
                                            <tr>
                                                <td style="text-align:right">
                                                    SUBTOTAL
                                                </td>
                                                <td><b>: </b></td>
                                                <td style="text-align: right; width: 30%;padding-right:20px">
                                                    @*<span> <b> <i class="fa fa-inr"></i> @Model.OrderAmount </b></span>*@
                                                    @*Yashaswi 7-7-2018*@
                                                    @*priti 20-10-2018*@
                                                    <span> <b> <i class="fa fa-inr"></i>@Model.lInvoiceDetailViewModels.Sum(x => x.ProductAmount - (x.CGSTAmount + x.SGSTAmount))</b> </span>
                                                </td>
                                                    @*<span> <b> <i class="fa fa-inr"></i> @Convert.ToDecimal(@Model.OrderAmount - @TotalGSTAmount) </b></span>*@
                                                   
                                            </tr>
                                            <tr>
                                                <td style="text-align:right">GST</td>
                                                <td><b>: </b></td>
                                                <td style="text-align: right; width: 30%; padding-right: 20px; "><span>  <b> <i class="fa fa-inr"></i> @TotalGSTAmount </b></span><br /></td>
                                            </tr>
                                            <tr></tr>
                                            @if (@Model.ShippingCharge > 0)
{
    <tr>
        <td style="text-align:right">SHIPPING CHARGE</td>
        <td><b>: </b></td>
        <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.ShippingCharge </b></span><br /></td>
    </tr>
}
@if (@Model.AdditionalCost > 0)
{
    <tr>
        <td style="text-align:right">ADDITIONAL COST</td>
        <td><b>: </b></td>
        <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.AdditionalCost</b> </span><br /></td>
    </tr>
}
@if (@Model.CustomDutyCharge > 0)
{
    <tr>
        <td style="text-align:right">CUSTOM DUTY CHARGE</td>
        <td><b>: </b></td>
        <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.CustomDutyCharge</b> </span><br /></td>
    </tr>
}
@if (@Model.OperatingCost > 0)
{
    <tr>
        <td style="text-align:right">OPERATING COST</td>
        <td><b>: </b></td>
        <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.OperatingCost</b> </span><br /></td>
    </tr>
}
@if (@Model.TotalDiscountAmount > 0)
{
    <tr>
        <td style="text-align:right">TOTAL DISCOUNT AMOUNT</td>
        <td><b>: </b></td>
        <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.TotalDiscountAmount</b> </span><br /></td>
    </tr>
}
                                            <tr>
                                                <td style="text-align:right"><b>TOTAL</b></td>
                                                <td><b>: </b></td>
                                         
                                                <td style="text-align: right; width: 30%; padding-right: 20px; "><span> <b>  <i class="fa fa-inr"></i>@Model.lInvoiceDetailViewModels.Sum(x=>x.ProductAmount)</b> </span></td>
                                               
                                                @*<td style="text-align: right; width: 30%; padding-right: 20px; "><span> <b>  <i class="fa fa-inr"></i> @Model.lGst.Sum(p => p.TotalAmt)</b> </span></td>*@
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div>
                            <table width="100%" cellspacing="5" cellpadding="5">
                                <tr>
                                    <td colspan="2">received by ______________________________checked by______________________________</td>                                   
                                 </tr>
                                <tr style="height:20px"><td colspan="2"></td></tr>
                                <tr>
                                    <td style="width:20%;" valign="top">condition of goods  
                                    </td>
                                    <td style="text-align: left; width: 80%">                                       
                                        condition - <br />
                                        damages - <br />
                                        shortages -              
                                                                                
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    $("#btnPrint").live("click", function () {
        var divContents = $("#dvContainer").html();
        var printWindow = window.open('', '', 'height=400,width=800');
        printWindow.document.write('<html><head><title>INVOICE</title>');
        printWindow.document.write('<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />');
        printWindow.document.write('</head><body >');
        printWindow.document.write(divContents);
        printWindow.document.write('</body></html>');
        printWindow.document.close();
        printWindow.print();
    });
</script>