@model ModelLayer.Models.ViewModel.PurchaseOrderReplyViewModel

@using ModelLayer.Models.ViewModel

@* This partial view defines form fields that will appear when creating and editing entities *@
<style type="text/css">
    #msform1 fieldset:not(:first-of-type) {
        display: none;
    }

    .field-validation-error {
        color: #000000 !important;
    }

    .succes-msg {
        color: #31A012;
        font-size: 20px;
    }

    .beatpicker-clearButton button {
        display: none;
    }

    .input-parent button {
        display: none;
    }

    .textarea-adjust {
        width: 85%;
    }
    /*Beatpicker Css*/
    .beatpicker-clearButton button {
        display: none;
    }

    .input-parent button {
        display: none;
    }

    .header-navbar-button {
        position: absolute !important;
    }

    .beatpicker .main-nav .current-indicator {
        text-align: center !important;
    }

    .beatpicker .main-nav .prev1 {
        left: 0 !important;
        width: 14%;
        padding: 0px 10px;
        color: #fff;
        font-size: 16px;
    }

    .beatpicker .main-nav .next1 {
        right: 0 !important;
        width: 9%;
        color: #fff;
        font-size: 16px;
    }

    .beatpicker .main-nav .prev1:hover {
        left: 0 !important;
        width: 14%;
        padding: 0px 10px;
        color: #fff;
        font-size: 20px;
        cursor: pointer !important;
    }

    .beatpicker .main-nav .next1:hover {
        right: 0 !important;
        width: 9%;
        color: #fff;
        font-size: 20px;
        cursor: pointer !important;
    }

    #divImages .remove {
        background: url(/Content/img/remove-icon.png) no-repeat 0px 0px #fff;
        float: left;
        font-size: 0 !important;
        width: 23px !important;
        padding: 2px 4px;
    }
    /*Beatpicker Css End*/

    #Remark {
        width: 99%;
    }
</style>



<link href="~/Content/css/BeatPicker.min.css" rel="stylesheet" />
<script src="~/Content/js/jquery-1.11.0.min.js"></script>
<script src="~/Content/js/BeatPicker.js"></script>
<link href="~/Content/assets/css/style.css" rel="stylesheet" />
<script src="~/Content/js/jquery-1.9.1.min.js"></script>
<link href="http://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
<link href="~/Content/assets/css/form-design.css" rel="stylesheet" />
<link href="~/Content/assets/css/font-awesome.min.css" rel="stylesheet" />

 @using (Html.BeginForm("Approve", "PurchaseOrderReply", null, FormMethod.Post, new { id = "Form_" }))
    {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)
<div class="row-fluid">
    <div class="box span12">
        <div class="box-header creatProduct clearfix" data-original-title="">
            <h2>
                <i class="icon-exclamation-sign"></i>
                <span class="break"></span>
                INVOICE DETAIL <span style="font-weight:bold"> [@Model.InvoiceCode]</span>
            </h2>
        </div>
        <div class="box-content">
            <div class="form-horizontal">

                @Html.HiddenFor(model => @Model.PurchaseOrderReplyID)
                @*@Html.HiddenFor(model => model.IsFulfillmentCenter)*@
                <div class="display-label" style="font-size:large; color:red">
                    Invoice Code: <b>@Model.InvoiceCode</b>
                    @Html.HiddenFor(model => @Model.InvoiceCode)
                </div>
                <div class="display-label">Supplier Name: <b>@Model.SupplierName</b></div>
                <div class="display-label">Ship To: <b>@Model.WarehouseName</b> (@Model.SupplierAddress)</div>

                <div class="display-label">
                    Dispatch Date: <b>@Convert.ToDateTime(@Model.DispatchDate).ToString("dd MMM yyyy")</b>
                    @Html.HiddenFor(model => @Model.DispatchDate)
                </div>
                <div class="display-label">Delivery Date: <b>@Convert.ToDateTime(@Model.DeliveryDateTime).ToString("dd MMM yyyy")</b></div>
                @Html.HiddenFor(model => @Model.DeliveryDateTime)
                @Html.HiddenFor(model => @Model.ReplyDate)



                <div class="display-label">Driver Name: <b>@Model.DriverName</b></div>
                <div class="display-label">Driver Mobile No.: <b>@Model.DriverMobileNumber</b></div>
                <div class="display-label">Driver Licence No.: <b>@Model.DriverLicenceNumber</b></div>
                <div class="display-label">Vehicle Number: <b>@Model.VehicleNumber</b></div>
                <div class="display-label">Vehicle Type: <b>@Model.VehicleType</b></div>
                <div class="display-label">Logistic Company Name: <b>@Model.LogisticCompanyName</b></div>
                <div class="display-label">Logistic Company Address: <b>@Model.LogisticCompanyAddress</b></div>
                <div class="display-label">Logistic Contact Person: <b>@Model.LogisticContactPerson</b></div>
                <div class="display-label">Logistic Contact Number: <b>@Model.LogisticContactNumber</b></div>
                <div class="display-label">E-Way Bill Number: <b>@Model.EWayBillNumber</b></div>
                <div class="display-label">Tracking No.: <b>@Model.TrackingNumber</b></div>
                <b>@ViewBag.SelectedDvName</b>
                @*<div class="display-label">Total Discount Amount:<b><i class="fa fa-inr"></i> @Model.TotalDiscountAmount</b></div>
        <div class="display-label">Shipping Charge: <b><i class="fa fa-inr"></i> @Model.ShippingCharge</b></div>
        <div class="display-label">Custom Duty Charge: <b><i class="fa fa-inr"></i> @Model.CustomDutyCharge</b></div>
        <div class="display-label">Operating Cost: <b><i class="fa fa-inr"></i> @Model.OperatingCost</b></div>
        <div class="display-label">Additional Cost: <b><i class="fa fa-inr"></i> @Model.AdditionalCost</b></div>
        <div class="display-label">Invoice Amount: <b><i class="fa fa-inr"></i> @Model.OrderAmount</b></div>
        <div class="display-label">Total Amount: <b><i class="fa fa-inr"></i> @Model.TotalAmount</b></div>
        <div class="display-label">Remark: <b>@Model.Remark</b></div>*@

            </div>
        </div>
    </div>

    <div class="box span11">
        <div class="box-header creatProduct clearfix" data-original-title="">
            <h2>
                <i class="icon-file-alt"></i>
                <span class="break"></span>
                INVOICE ITEM(S)
            </h2>
        </div>

        <div class="box-content nameDscrp">
            <div class="NameDescription">
                <div class="box-content box-content1" style="padding-left:0px;width:99%;overflow-x:scroll;z-index:1;">
                    <div id="ItemDetails">
                        <table id="tbl" class="table table-striped table-bordered bootstrap-datatable datatable dataTable" width="100%">
                            <tr>
                                <th>Product</th>
                                <th>Item</th>
                                <th>HSN Code</th>
                                @*<th>Required Quantity</th>*@
                                <th>Quantity</th>
                                <th>Unit Price</th>
                                <th>MRP</th>
                                @*<th>SaleRate</th>*@
                                <th>CGST</th>
                                <th>SGST</th>
                                <th>IGST</th>
                                <th>Amount</th>
                                @*<th>Remark</th>*@
                            </tr>
                            @*@foreach (var item in Model)*@
                            @{
        decimal TotalGSTAmount = 0;
                            }
                            @for (int i = 0; i < Model.lPurchaseOrderReplyDetailViewModels.Count; i++)
                            {
                                <tr>
                                    <td class="table-shopping-cart-img" style="text-align: left;">
                                        <img id=" imgproductimage" src="@Model.lPurchaseOrderReplyDetailViewModels[i].StockThumbPath" onerror="this.src = '/Content/Images/no_image.png'" style="width: 70px; height:70px;" alt=" eZeelo " />
                                    </td>
                                    <td>
                                        @Model.lPurchaseOrderReplyDetailViewModels[i].ItemName
                                        @Html.HiddenFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].PurchaseOrderReplyDetailsID)
                                        @Html.HiddenFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].ProductID)
                                        @Html.HiddenFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].ProductVarientID)
                                        @Html.HiddenFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].PurchaseOrderDetailID)

                                    </td>
                                    <td>
                                        @Model.lPurchaseOrderReplyDetailViewModels[i].HSNCode
                                    </td>
                                    @*<td>
                                            @Html.LabelFor(model => @Model.lInvoiceDetailViewModels[i].Quantity, @Model.lInvoiceDetailViewModels[i].Quantity.ToString(), new { text = @Model.lInvoiceDetailViewModels[i].Quantity, value = @Model.lInvoiceDetailViewModels[i].Quantity, id = "Quantity_" + i, placeholder = "0", Style = "width:30px" })
                                        </td>*@
                                    <td style="text-align:center">
                                        @Html.LabelFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].Quantity, @Model.lPurchaseOrderReplyDetailViewModels[i].Quantity.ToString(), new { id = "ReceivedQuantity_" + i, placeholder = "0", Style = "width:30px" })
                                        @Html.HiddenFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].Quantity)
                                    </td>
                                    <td>
                                        @Html.LabelFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].BuyRatePerUnit, @Model.lPurchaseOrderReplyDetailViewModels[i].BuyRatePerUnit.ToString(), new { id = "BuyRatePerUnit_" + i, placeholder = "0", Style = "width:40px" })
                                        @Html.HiddenFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].BuyRatePerUnit)
                                    </td>
                                    <td>
                                        @Html.LabelFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].MRP, @Model.lPurchaseOrderReplyDetailViewModels[i].MRP.ToString(), new { id = "MRP_" + i, placeholder = "0", Style = "width:40px" })
                                        @Html.HiddenFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].MRP)
                                    </td>
                                    @*<td>
                                            @Html.LabelFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].SaleRate, @Model.lPurchaseOrderReplyDetailViewModels[i].SaleRate.ToString(), new { id = "SaleRate_" + i, placeholder = "0", Style = "width:40px" })
                                            @Html.HiddenFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].SaleRate)
                                        </td>*@
                                    <td>
                                        @Html.LabelFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].CGSTAmount, @Model.lPurchaseOrderReplyDetailViewModels[i].CGSTAmount.ToString(), new { placeholder = "0", Style = "width:40px" })
                                        @Html.HiddenFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].CGSTAmount)
                                    </td>
                                    <td>
                                        @Html.LabelFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].SGSTAmount, @Model.lPurchaseOrderReplyDetailViewModels[i].SGSTAmount.ToString(), new { placeholder = "0", Style = "width:40px" })
                                        @Html.HiddenFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].SGSTAmount)
                                    </td>
                                    <td>
                                        @Html.LabelFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].IGSTAmount, @Model.lPurchaseOrderReplyDetailViewModels[i].IGSTAmount.ToString(), new { placeholder = "0", Style = "width:40px" })
                                        @Html.HiddenFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].IGSTAmount)

                                    </td>
                                    <td>
                                        @Html.LabelFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].Amount, @Model.lPurchaseOrderReplyDetailViewModels[i].Amount.ToString(), new { @class = "txt", id = "Amount_" + i, placeholder = "0", Style = "width:40px" })
                                        @Html.HiddenFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].Amount)
                                    </td>

                                    @*<td>
                                            @Html.LabelFor(model => @Model.lPurchaseOrderReplyDetailViewModels[i].Remark, @Model.lPurchaseOrderReplyDetailViewModels[i].Remark, new { Style = "width:180px" })
                                        </td>*@
                                </tr>
                                TotalGSTAmount = Convert.ToDecimal(@Model.lPurchaseOrderReplyDetailViewModels[i].CGSTAmount) + Convert.ToDecimal(@Model.lPurchaseOrderReplyDetailViewModels[i].SGSTAmount);
                            }
                        </table>

                    </div>
                </div>
            </div>

            <div>
                <table width="100%">
                    <tr>
                        <td style="width:50%;" valign="top"><b>Remarks</b> <br />@Model.Remark</td>
                        <td style="width:50%; text-align:right">
                            <table width="100%">
                                <tr>
                                    <td style="text-align:right">
                                        SUBTOTAL
                                    </td>
                                    <td><b>: </b></td>
                                    <td style="text-align: right; width: 30%;padding-right:20px">
                                        @*<span> <b> <i class="fa fa-inr"></i> @Model.OrderAmount </b></span>*@
                                        @*Yashaswi 7-7-2018*@
                                        <span> <b> <i class="fa fa-inr"></i> @Convert.ToDecimal(@Model.OrderAmount - @TotalGSTAmount) </b></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:right">GST</td>
                                    <td><b>: </b></td>
                                    <td style="text-align: right; width: 30%; padding-right: 20px; "><span>  <b> <i class="fa fa-inr"></i> @TotalGSTAmount </b></span><br /></td>
                                </tr>
                                @if (@Model.ShippingCharge > 0)
{
    <tr>
        <td style="text-align:right">SHIPPING CHARGE</td>
        <td><b>: </b></td>
        <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.ShippingCharge </b></span><br /></td>
    </tr>
}
@if (@Model.AdditionalCost > 0)
{
    <tr>
        <td style="text-align:right">ADDITIONAL COST</td>
        <td><b>: </b></td>
        <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.AdditionalCost</b> </span><br /></td>
    </tr>
}
@if (@Model.CustomDutyCharge > 0)
{
    <tr>
        <td style="text-align:right">CUSTOM DUTY CHARGE</td>
        <td><b>: </b></td>
        <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.CustomDutyCharge</b> </span><br /></td>
    </tr>
}
@if (@Model.OperatingCost > 0)
{
    <tr>
        <td style="text-align:right">OPERATING COST</td>
        <td><b>: </b></td>
        <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.OperatingCost</b> </span><br /></td>
    </tr>
}
@if (@Model.TotalDiscountAmount > 0)
{
    <tr>
        <td style="text-align:right">TOTAL DISCOUNT AMOUNT</td>
        <td><b>: </b></td>
        <td style="text-align: right; width: 30%; padding-right: 20px; "><span>   <b><i class="fa fa-inr"></i> @Model.TotalDiscountAmount</b> </span><br /></td>
    </tr>
}
                                <tr>
                                    <td style="text-align:right"><b>TOTAL</b></td>
                                    <td><b>: </b></td>
                                    <td style="text-align: right; width: 30%; padding-right: 20px; "><span> <b>  <i class="fa fa-inr"></i> @Model.TotalAmount</b> </span></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <input type="submit" value="Confirm" class="btn btn-success mrg-left mrg-top" />
        @Html.ActionLink("Back to List", "InvoiceList", null, new { @class = "btn btn-default mrg-left mrg-top" })
    </div>

</div>
}
<script language="javascript">
    $(document).ready(function () {
        var table = document.getElementById('tbl');
        var rowLength = table.rows.length;


        for (var i = 0; i < rowLength-1; i++) {
            $('.table #ExpiryDate_' + i).each(function () {
                $(this).datepicker({ dateFormat: 'mm/dd/yy' });

                $(this).css({
                    "position": "relative",
                    "z-index": 999999
                });
            });
        }
    });
</script>



