@model ModelLayer.Models.ViewModel.PurchaseOrderViewModel
@using ModelLayer.Models.ViewModel

@{
    ViewBag.Title = "Details";
}

<link href="~/Content/assets/css/font-awesome.min.css" rel="stylesheet" />

<div id="content" class="span10">
    <div class="row-fluid">
        <div class="box span12">
            <div class="box-header creatProduct clearfix" data-original-title="">
                <h2>
                    <i class="icon-exclamation-sign"></i>
                    <span class="break"></span>
                    PURCHASE ORDER DETAIL <span style="font-weight:bold"> [@Model.PurchaseOrderCode]</span>
                </h2>
            </div>
            <div class="box-content">
                <div class="form-horizontal">
                    <div class="display-label" style="color: #3C73DC">Purchase Order Code: <b>@Model.PurchaseOrderCode</b></div>

                    <div class="display-label">Warehouse:<b> @Model.WarehouseName</b></div>

                    <div class="display-label">Supplier: <b>@Model.SupplierName</b></div>

                    <div class="display-label">Order Date: <b>@Model.OrderDate.ToString("dd/MM/yyyy")</b></div>

                    <div class="display-label">Expected Delivery Date: <b>@Model.ExpetedDeliveryDate.ToString("dd/MM/yyyy")</b></div>

                    <div class="display-label">Order Amount: <b><i class="fa fa-inr"></i> @Model.Amount</b></div>

                    <div class="display-label">Remark: <b>@Model.Remark</b></div>

                    <b> @ViewBag.SelectedDvName</b>
                </div>
            </div>
        </div>

        <div class="box">
            <div class="box-header creatProduct clearfix" data-original-title="">
                <h2>
                    <i class="icon-exclamation-sign"></i>
                    <span class="break"></span>
                    ADDED ITEM(S)
                </h2>
            </div>
            <div class="box-content nameDscrp">
                <div class="NameDescription">
                    <div class="box-content box-content1" style="padding-left:0px;width:99%;overflow-x:scroll;z-index:1;">

                        @if (Session["lPurchaseOrderReplyDetailViewModel"] != null)
                        {
                            List<PurchaseOrderDetailsViewModel> objList = (List<PurchaseOrderDetailsViewModel>)Session["lPurchaseOrderReplyDetailViewModel"];

                            <table class="table table-striped table-bordered bootstrap-datatable datatable dataTable" width="100%">
                                <tr>
                                    <th>Product</th>
                                    <th>Item Name</th>
                                    <th>HSN Code</th>
                                    <th>Nick Name</th>
                                    @if(@Model.IsAcceptedBySupplier==0)
                                    { 
                                    <th>In Stock</th>
                                    }
                                    <th>Quantity Required</th>
                                    <th>Unit Price</th>
                                    <th>Amount</th>
                                </tr>
                                @foreach (var item in objList)
                                {
                                    <tr>
                                        <td class="table-shopping-cart-img" style="text-align: left;">
                                            <img id=" imgproductimage" src="@item.StockThumbPath" onerror="this.src = '/Content/Images/no_image.png'" style="width: 70px; height:70px;" alt=" eZeelo " />
                                        </td>
                                        <td>@item.ItemName</td>
                                        <td>@item.HSNCode</td>
                                        <td>@item.Nickname</td>
                                   @if (@Model.IsAcceptedBySupplier == 0)
{
    <td style="text-align:center">@item.AvailableQuantity</td>
}
                                        <td style="text-align:center">@item.Quantity</td>
                                        <td> @item.UnitPrice</td>
                                        <td> @item.ProductAmount</td>
                                    </tr>
                                }
                            </table>
                        }
                    </div>
                </div>
            </div>
        </div>
        <br />
        <p>
@*Start yashaswi 31/3/2018*@
@if (@Model.IsAcceptedBySupplier == 0)
{
     @Html.ActionLink("Accept", "Accept", new { id = @Model.PurchaseOrderID }, new { @class = "btn btn-default mrg-left mrg-top  btn-success" })<span>&nbsp;&nbsp;&nbsp;</span>   
     @Html.ActionLink("Reject", "Reject", new { id = @Model.PurchaseOrderID }, new { @class = "btn btn-default mrg-left mrg-top  btn-danger", onclick = "return confirm('Are you sure you wish to reject this Purchase Order?');" })
}
else if (@Model.IsAcceptedBySupplier == 1 && @Model.InvoiceCount==0)
{   
    @Html.ActionLink("Create Invoice", "CreateInvoice", new { PurchaseOrderID = @Model.PurchaseOrderID }, new { @class = "btn btn-default mrg-left mrg-top  btn-success" })<span>&nbsp;&nbsp;&nbsp;</span>
    @Html.ActionLink("Reject", "Reject", new { id = @Model.PurchaseOrderID }, new { @class = "btn btn-default mrg-left mrg-top  btn-danger", onclick = "return confirm('Are you sure you wish to reject this Purchase Order?');" })
}
else if (@Model.IsAcceptedBySupplier == 2)
{
     @Html.ActionLink("Accept", "Accept", new { id = @Model.PurchaseOrderID }, new { @class = "btn btn-default mrg-left mrg-top  btn-success" })
}
            <span>&nbsp;&nbsp;&nbsp;</span>  @Html.ActionLink("Back to List", "Index", null, new { @class = "btn btn-default mrg-left mrg-top" })
        </p>

    </div>
</div>
