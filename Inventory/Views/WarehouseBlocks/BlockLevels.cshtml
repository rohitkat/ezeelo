@model List<ModelLayer.Models.ViewModel.WarehouseBlockLevelViewModel>
 @using ModelLayer.Models.ViewModel;

<style type="text/css">
    #msform1 fieldset:not(:first-of-type) {
        display: none;
    }

    .field-validation-error {
        color: #000000 !important;
    }

    .succes-msg {
        color: #31A012;
        font-size: 20px;
    }

    .beatpicker-clearButton button {
        display: none;
    }

    .input-parent button {
        display: none;
    }

    .textarea-adjust {
        width: 85%;
    }
    /*Beatpicker Css*/
    .beatpicker-clearButton button {
        display: none;
    }

    .input-parent button {
        display: none;
    }

    .header-navbar-button {
        position: absolute !important;
    }

    .beatpicker .main-nav .current-indicator {
        text-align: center !important;
    }

    .beatpicker .main-nav .prev1 {
        left: 0 !important;
        width: 14%;
        padding: 0px 10px;
        color: #fff;
        font-size: 16px;
    }

    .beatpicker .main-nav .next1 {
        right: 0 !important;
        width: 9%;
        color: #fff;
        font-size: 16px;
    }

    .beatpicker .main-nav .prev1:hover {
        left: 0 !important;
        width: 14%;
        padding: 0px 10px;
        color: #fff;
        font-size: 20px;
        cursor: pointer !important;
    }

    .beatpicker .main-nav .next1:hover {
        right: 0 !important;
        width: 9%;
        color: #fff;
        font-size: 20px;
        cursor: pointer !important;
    }

    #divImages .remove {
        background: url(/Content/img/remove-icon.png) no-repeat 0px 0px #fff;
        float: left;
        font-size: 0 !important;
        width: 23px !important;
        padding: 2px 4px;
    }
    /*Beatpicker Css End*/
</style>

<link href="~/Content/css/BeatPicker.min.css" rel="stylesheet" />
<script src="~/Content/js/jquery-1.11.0.min.js"></script>
<script src="~/Content/js/BeatPicker.js"></script>
<link href="~/Content/assets/css/style.css" rel="stylesheet" />
<script src="~/Content/js/jquery-1.9.1.min.js"></script>
<link href="http://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
<link href="~/Content/assets/css/form-design.css" rel="stylesheet" />
<link href="~/Content/assets/css/font-awesome.min.css" rel="stylesheet" />

@if (Model.Count > 0)
{
<div class="row-fluid">

    <div class="box span12">
        <div class="box-header creatProduct clearfix" data-original-title="">
            <h2>
                <i class="icon-file-alt"></i>
                <span class="break"></span>
                TOTAL LEVELS: <span>@Model.Count</span>
            </h2>
        </div>
        @*<table width="100%">
            <tr>
                <td style="text-align:left; padding-left:10px">
                    <span>Total Level(s): @Model.Count</span>
                </td>
                <td style="text-align:right;padding-right:15px">                    
                </td>
            </tr>
        </table>*@

        <div class="box-content">
            <table id="tbl" class="table table-striped table-bordered bootstrap-datatable datatable dataTable" width="100%">
                <tr>
                    <th>Sr.No.</th>
                    <th>Row/Level</th>
                    <th>Columns</th>                   
                    <th></th>
                </tr>
                @{
                    var i = 1;
                }
                @foreach (var item in Model)
                {
                    <tr>      
                        <td style="text-align:left">
                            @i
                            @{
                              i = i + 1;
                             }
                        </td>                  
                    <td>@item.Name</td>
                    <td>@item.Columns</td>                  
                    <td>
                        <button id="btnEdit" type="button" class="btnEdit btn btn-success btn-small" value="@item.AlphabeteID">Edit</button>
                        @if (@item.AlphabeteID == Model.Count)
                        { 
                        <button id="btnRemove" type="button" class="btnRemove btn btn-danger btn-small" value="@item.AlphabeteID">Remove</button>
                        }
                   </td>
                </tr>
                }
            </table>
           
                <div class="box">
        <div class="box-header creatProduct clearfix" data-original-title="">
            <h2>
                <i class="icon-file-alt"></i>
                <span class="break"></span>
               STORAGE LOCATIONS
            </h2>
        </div>
        <div class="box-content nameDscrp">
            <div class="NameDescription">
                <div class="box-content box-content1">
                    <div id="WarehouseBlockLocations">
                        @if (Session["WarehouseBlockLocations"] != null)
                        {
                            List<WarehouseBlockLocationViewModel> objList = (List<WarehouseBlockLocationViewModel>)Session["WarehouseBlockLocations"];
                            @Html.Partial("WarehouseBlockLocations", objList);
                        }      
                    </div>
                </div>
            </div>
        </div>
    </div>            
        </div>        
    </div>    
</div>
}

<script type="text/javascript">

    $(document).ready(function () {

        $(".btnRemove").click(function (evt) {
            evt.preventDefault();
            // Get the value from the clicked button
            var AlphabeteID = $(this).val();
           
            $.ajax({
                type: "POST",
                url: '@Url.Action("Remove", "WarehouseBlocks")',
                data: { 'AlphabeteID': AlphabeteID },
                cache: false,
                success: function (data, status) {
                    $("#BlockLevels").html(data);

                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetNextAlphabete", "WarehouseBlocks")',
                        data: { 'AlphabeteID': AlphabeteID },
                        //dataType: "json",
                        cache: false,
                        success: function (data) {
                            $("#AlphabeteID").val(data.AlphabeteID);
                            $("#LevelName").val(data.LevelName);
                            $("#Columns").val(data.Columns);

                            //Disable zone selection when any level has added
                            var table = document.getElementById('tbl');
                            var rowLength = table.rows.length;
                            if (rowLength > 1) {
                                $("#WarehouseZoneID").attr("disabled", true);
                            } else {
                                $("#WarehouseZoneID").attr("disabled", false);
                            }
                        },
                        error: function (x, e) {
                        }
                    });
                },
                error: function (x, e) {
                    alet('error')
                }
            });
            //$("#ItemDetails").load("/WarehouseBlocks/Remove", { 'AlphabeteID': AlphabeteID });
        });


        $(".btnEdit").click(function (evt) {
            evt.preventDefault();
            // Get the value from the clicked button
            var AlphabeteID = $(this).val();

            $.ajax({
                type: "POST",
                url: '@Url.Action("EditLevel", "WarehouseBlocks")',
                data: { 'AlphabeteID': AlphabeteID },
                cache: false,
                success: function (data, status) {
                    $("#AlphabeteID").val(data.AlphabeteID);
                    $("#LevelName").val(data.LevelName);
                    $("#Columns").val(data.Columns);  
                },
                error: function (x, e) {
                    alet('error')
                }
            });
        });
    });
</script>