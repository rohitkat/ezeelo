@model List<ModelLayer.Models.ViewModel.ProductRateListViewModel>


<script src="~/Content/js/jquery-2.1.3.min.js"></script>
<link href="~/Content/css/jquery.dataTables.css" rel="stylesheet" />
<script src="~/Content/js/jquery.dataTables.js" language="jascript"></script>
<style>
    .header {
        background-color: #536075 !important; /*4B77BE*/
        color: white;
    }
    select#ddlmonth {
        border-radius: 5px;
    }
    input#search {
        border-radius: 5px;
    }
    a.btn.btn-small.btn-info {
        border-radius: 5px !important;
    }
    a#getCurRate {
        border-radius: 5px !important;
    }
    table#tblData thead tr th {
        white-space: nowrap;
        background: #4b77be !important;
    }
</style>
<script type="text/javascript" class="init">
    $(document).ready(function () {
        $('#tblData').DataTable({
            dom: 'T<"clear">lfrtip',
            "processing": true,
            "serverSide": true,
            "aaSorting": []
        });

        $("#ddlmonth").val(@ViewBag.SelectedMonth);

        $("#ddlmonth").change(function () {
            $("#lblmsg").show();
            window.location = "/ProductRate/ProductList?Month=" + $(this).val();

        });

        $('#search').autocomplete({
            source: function (request, response) {
                //alert("this is search");
                if ($('#search').val().length <= 2)
                    return false;
                var searchTerm = $("#search").val();               
                searchTerm = searchTerm.replace("+", "=");
                var autocompleteUrl = '/ProductRate/AutoComplete?term=' + searchTerm;              
                $.ajax({
                    url: autocompleteUrl,
                    type: 'GET',
                    cache: false,
                    dataType: 'json',
                    success: function (json) {
                        response($.map(json, function (data, id) {
                            return {
                                ID: data.ID,
                                label: data.Name //Yashaswi 3/5/2018
                            };
                        }));
                    },
                    error: function (xmlHttpRequest, textStatus, errorThrown) {
                        console.log('some error occured', textStatus, errorThrown);
                    }
                });
            },
            minLength: 1,
          
            select: function (event, ui) {
                event.preventDefault();
                $('#search').val(ui.item.label);//Yashaswi 3/5/2018
                $("#lblmsg").show();
                window.location = "/ProductRate/ProductList?ProductId=" + ui.item.ID;//Yashaswi 3/5/2018
            },
           
        });

    });
</script>


<section class="right_side_main_part">
    <div class="row-fluid">
        <div class="box span12 right_side_up_part">
            <div class="box-header">
                <h2>
                    <i class="icon-list-alt"></i>
                    <span class="break"></span>
                    Product List
                </h2>
            </div>

            <div class="box-content">
                <center>
                    <div>
                        <table style=" border-spacing: 10px; border-collapse: separate;">
                            <tr style="text-align:center">
                                <td><label> Select Month</label></td>
                                <td><label> Search Other Products</label></td>
                            </tr>
                            <tr>
                                <td>
                                    <select id="ddlmonth" style="text-transform:uppercase;width:130px">
                                        <option value="1">january</option>
                                        <option value="2">february</option>
                                        <option value="3">march</option>
                                        <option value="4">april</option>
                                        <option value="5">may</option>
                                        <option value="6">jun</option>
                                        <option value="7">july</option>
                                        <option value="8">augest</option>
                                        <option value="9">september</option>
                                        <option value="10">october</option>
                                        <option value="11">november</option>
                                        <option value="12">december</option>
                                    </select>
                                </td>
                                <td>
                                    <input type="text" id="search" placeholder="Enter Product Name" style="width:250px" /> @*Yashaswi 3/5/2018*@
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" style="text-align:center"><label id="lblmsg" style="color:red;display:none">Please Wait! Loading your Data...</label> </td>
                            </tr>
                        </table>


                    </div>
                </center>
                <table id="tblData" class="table border-table display" width="100%">
                    <thead>
                        <tr>
                            <th class="header ">Sr. No</th>
                            <th class="header ">Product</th>
                            <th class="header ">Product Name</th>
                            <th class="header ">HSNCode</th>
                            <th class="header ">No of Varient</th>
                            <th class="header ">Quotation Date</th>
                            <th class="header "></th>
                        </tr>
                    </thead>

                    @for (var i = 0; i < Model.Count(); i++)
                    {
                        <tr>

                            <td class="hideCol-@i">

                                @{
                                    var j = i;
                                    j = j + 1;
                                }
                                @j
                                <label style="display:none" id="ProductId-@i">@Model[i].ProductId</label>
                            </td>
                            <td class="hideCol-@i">
                                <img id=" imgproductimage" src="@Model[i].ProductImgPath" onerror="this.src = '/Content/Images/no_image.png'" style="width: 30px; height:30px;" alt=" eZeelo " />
                            </td>
                            <td class="hideCol-@i">
                                @Model[i].ProductName
                            </td>
                            <td class="hideCol-@i">
                                @Model[i].HSNCode
                            </td>
                            <td class="hideCol-@i">
                                @Model[i].VarientCount
                            </td>
                            <td class="hideCol-@i">
                                @Model[i].QuotationDate.ToString("dd/MM/yyyy")
                            </td>
                            <td class="hideCol-@i">
                                @Html.ActionLink("Add Rate", "ProductVarientList", new { ProductId = @Model[i].ProductId }, new { @class = "btn btn-small btn-info" })
                                @Html.ActionLink("Current Rate", "DVFVRateMarginList", "Report", new { ProductId = @Model[i].ProductId }, new { @class = "btn btn-small btn-success", @id = "getCurRate" })
                            </td>
                          

                        </tr>

                    }
                </table>

            </div>
        </div>
    </div>
    </section>




