@model IEnumerable<ModelLayer.Models.ViewModel.BlockViewModel>
@using System.Text.RegularExpressions;
@using System.Globalization;
@{
    Layout = "~/Views/Shared/_Layout_Home.cshtml";
}
<link rel="stylesheet" href="~/Content/css/product_slider.css">
<link rel="stylesheet" href="~/Content/css/multipleSlider.css">

<style>
    .product-caption {
        padding: 10px 2px;
        position: relative;
    }

    .product-labels {
        position: absolute;
        top: 3px !important;
        left: 0px !important;
        z-index: 1;
        list-style: none;
        margin: 0;
        padding: 0;
        font-size: 11px;
        text-transform: uppercase;
        color: #fff;
    }

    .product-img-wrap:hover {
        -webkit-transform: scale(1.1);
        transform: scale(1.1);
    }
    /* Start Yashaswi Label For Retail Point */
    .product-labelsRP {
        position: absolute;
        top: 3px !important;
        right: 0px !important;
        z-index: 1;
        list-style: none;
        margin: 0;
        padding: 0;
        font-size: 11px;
        text-transform: uppercase;
        color: #fff;
    }

        .product-labelsRP > li {
            background: #048f15;
            color: #fff;
            -webkit-box-shadow: 0 1px 2px rgba(0,0,0,0.4);
            box-shadow: 0 1px 2px rgba(0,0,0,0.4);
            padding: 3px 0px;
            line-height: 1em;
            margin-bottom: 5px;
            display: table;
            font-size: 14px;
            min-width: 70px;
            max-width: 250px;
            font-weight: 900;
        }

    /* End Yashaswi Label For Retail Point */
    .product-labelsCB {
        position: absolute;
        top: 25px !important;
        right: 0px !important;
        z-index: 1;
        list-style: none;
        padding: 0;
        font-size: 11px;
        text-transform: uppercase;
        color: #fff;
    }

        .product-labelsCB > li {
            background: #5cc9f7;
            color: #fff;
            -webkit-box-shadow: 0 1px 2px rgba(0,0,0,0.4);
            box-shadow: 0 1px 2px rgba(0,0,0,0.4);
            padding: 3px 0px;
            padding-right: 10px;
            padding-left: 10px;
            line-height: 1em;
            margin-bottom: 5px;
            display: table;
            font-size: 12px;
            min-width: 50px;
            max-width: 250px;
            font-weight: 900;
        }
    /**/
</style>
@{
    string cityName = "", city = "";
    string franchiseID = "";//added
    string s = Request.Cookies["UrlCookie"].Value;//for test

    if (Request.Cookies["CityCookie"] != null && Request.Cookies["CityCookie"].Value != "")
    {
        cityName = Request.Cookies["CityCookie"].Value.Split('$')[1].ToLower();
        city = Request.Cookies["CityCookie"].Value.Split('$')[0];
        franchiseID = Request.Cookies["CityCookie"].Value.Split('$')[2];//added franchiseId by Ashish for multiple frnachise in same city
                                                                        // franchiseId = "2";

    }
    else
    {
        cityName = "kanpur";
        franchiseID = "1060";
    }

    if (Session["UID"] == null)
    {
        <script>
            var cname = "@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]";
            window.location = cname + '@cityName' + "/" + '@franchiseID' + "/Login/Login";
        </script>
    }

    @*//-- Add by Ashish (Dynamic Message) --//*@
    string FSWMessage = "";
    if (franchiseID != "")
    {
        DayOfWeek day = DateTime.Now.DayOfWeek;

        for (var i = 0; i < ViewBag.FestivalMessage.Count; i++)
        {
            string dbFestivalToDate = ViewBag.FestivalToDate[i];
            string cuFestivalDate = Convert.ToString(string.Format("{0:dd/MM/yyyy}", DateTime.Now.Date));

            DateTime cuFD1 = DateTime.ParseExact(cuFestivalDate.ToString(), @"d/M/yyyy", System.Globalization.CultureInfo.InvariantCulture);
            if (ViewBag.FestivalFrmDate[i] != null && ViewBag.FestivalToDate[i] != null && ViewBag.FestivalFrmDate[i] != "" && ViewBag.FestivalToDate[i] != "")
            {
                DateTime dbFD2 = DateTime.ParseExact(ViewBag.FestivalFrmDate[i], @"d/M/yyyy", System.Globalization.CultureInfo.InvariantCulture);
                DateTime dbFD3 = DateTime.ParseExact(ViewBag.FestivalToDate[i], @"d/M/yyyy", System.Globalization.CultureInfo.InvariantCulture);
                if (cuFD1 >= dbFD2 && cuFD1 <= dbFD3)
                {
                    FSWMessage = ViewBag.FestivalMessage[i];
                }
            }
        }
        for (var j = 0; j < ViewBag.SeasonalMessage.Count; j++)
        {
            if (ViewBag.SeasonalFrmMonth[j] != null && ViewBag.SeasonalToMonth[j] != null && ViewBag.SeasonalFrmMonth[j] != "" && ViewBag.SeasonalToMonth[j] != "")
            {
                int dbS1 = DateTime.Parse("1." + ViewBag.SeasonalFrmMonth[j] + " 2008").Month; /// using trick
                int dbS2 = DateTime.Parse("1." + ViewBag.SeasonalToMonth[j] + " 2008").Month; /// using trick
                if (DateTime.Now.Month >= dbS1 && DateTime.Now.Month <= dbS2)
                {
                    FSWMessage = FSWMessage + "." + ViewBag.SeasonalMessage[j];
                }
            }
        }
        for (var k = 0; k < ViewBag.WeeklyDay.Count; k++)//Enumerable.Count(ViewBag.WeeklyDay)
        {
            string strWeeklyMsg = ViewBag.WeeklyDay[k];
            if (strWeeklyMsg != ",,,,,," && strWeeklyMsg != null)
            {
                string[] str1 = strWeeklyMsg.Split(',');
                foreach (string d in str1)
                {
                    if (d == day.ToString())
                    {
                        FSWMessage = FSWMessage + "." + ViewBag.WeeklyMessage[k];
                    }
                }

            }
        }
    }
    @*//-- End Add by Ashish (Dynamic Message) --//*@
}
@*<link href="~/Content/css/Site.css" rel="stylesheet" />*@
<script src="~/Scripts/Products.js"></script>
<link href="~/Content/css/Site.css" rel="stylesheet" />
@*<link href="~/Content/css/bootstrap.css" rel="stylesheet" />*@
<div class="container-fluid" style="padding:0px;">

    <marquee style="color: red; font-weight: 700; display: none;">@FSWMessage</marquee>
    <div class="col-md-9"></div>
    @*<div id="carousel" class="carousel slide carousel-fade" data-ride="carousel" style="width: 100%;">
            @{ModelLayer.Models.ViewModel.BlockViewModel block = Model.Where(x => x.Name.ToLower().Trim() == "banner").FirstOrDefault();}
            @if (block != null && block.blockItemsList != null)
            {
                int max = block.blockItemsList.Count;
                if (block.MaxLimit < block.blockItemsList.Count)
                {
                    max = block.MaxLimit;
                }

                <ol class="carousel-indicators">
                    @for (int i = 0; i < max; i++)
                    {
                        <li data-target="#carousel" data-slide-to="@i" class="active"></li>
                    }
                </ol>
                <div class="carousel-inner carousel-zoom" id="carouselMain">
                    @for (int i = 0; i < max; i++)
                    {
                        <div class="item" id="carouselSub">
                            <a href="@block.blockItemsList[i].LinkUrl"><img class="img-responsive " alt="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(block.blockItemsList[i].Tooltip.ToLower())" src="@block.blockItemsList[i].ImageName" title="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(block.blockItemsList[i].Tooltip.ToLower())" onerror="this.src = '/Content/Images/no_image.png'"></a>

                        </div>
                    }

                    @if (max == 0)
                    {
                        <a href="@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]/@cityName/@franchiseID"><img class="img-responsive" alt="eZeelo/@cityName/@franchiseID" src="/Content/Images/no_image.png" title="eZeelo/@cityName/@franchiseID"></a> ////added /franchiseId by Ashish for multiple MCO in same city
                    }

                </div>
            }
            else
            {
                <a href="@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]/@cityName/@franchiseID"><img class="img-responsive" alt="eZeelo/@cityName/@franchiseID" src="/Content/Images/no_image.png" title="eZeelo/@cityName/@franchiseID"></a>////added /@franchiseId
            }

            <a class="carousel-control left" href="#carousel" data-slide="prev">‹</a>
            <a class="carousel-control right" href="#carousel" data-slide="next">›</a>
        </div>*@
</div>
<div id="home-slider">
    <div class="row">
        @Html.Hidden("hdnSessionValue", @Session["UID"])
        <div class="container-fluid">
            <div class="col-sm-12 clearfix">
                <div class="col-sm-12" style="">
                    <div class="w3-content w3-section " style="width: 100%;">
                        @*Start Code commentend by Yashaswi 20-2-2019 For Home Page Dynamic Sections*@
                        @*and add in Main section main-body*@
                        @*@{ModelLayer.Models.ViewModel.BlockViewModel block = Model.Where(x => x.Name.ToLower().Trim() == "banner").FirstOrDefault();}
                            @if (block != null && block.blockItemsList != null)
                            {
                                int max = block.blockItemsList.Count;
                                if (block.MaxLimit < block.blockItemsList.Count)
                                {
                                    max = block.MaxLimit;
                                }
                                for (int i = 0; i < max; i++)
                                {
                                <a href="@block.blockItemsList[i].LinkUrl"><img class="mySlides " alt="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(block.blockItemsList[i].Tooltip.ToLower())" src="@block.blockItemsList[i].ImageName" title="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(block.blockItemsList[i].Tooltip.ToLower())" onerror="this.src = '/Content/Images/no_image.png'" style="width:100%"></a>
                                }

                                if (max == 0)
                                {
                                    <a href="http://www.ezeelo.com/@cityName/@franchiseID"><img class="mySlides" alt="eZeelo/@cityName/@franchiseID" src="/Content/Images/no_image.png" title="eZeelo/@cityName/@franchiseID" style="width: 100%;"></a> ////added /@franchiseId by Ashish for multiple MCO in same city
                                }
                            }
                            else
                            {
                                <a href="http://www.ezeelo.com/@cityName/@franchiseID"><img class="mySlides" alt="eZeelo/@cityName/@franchiseID" src="/Content/Images/no_image.png" title="eZeelo/@cityName/@franchiseID" style="width: 100%;"></a> ////added /@franchiseId
                            }*@
                    </div>
                    <script>
                        var myIndex = 0;
                        carousel();

                        function carousel() {
                            var i;
                            var x = document.getElementsByClassName("mySlides");
                            for (i = 0; i < x.length; i++) {
                                x[i].style.display = "none";
                                //x[i].style.height = "275px";
                            }
                            myIndex++;
                            if (myIndex > x.length) { myIndex = 1 }
                            x[myIndex - 1].style.display = "block";
                            setTimeout(carousel, 5000);
                        }
                    </script>
                </div>
                @*<div class="col-sm-3" style=" padding-left: 0px; padding-right: 0px; margin-top: 6px;">
                        @{ block = Model.Where(x => x.Name.ToLower().Trim() == "right banner").FirstOrDefault();}
                        @if (block != null && block.blockItemsList != null)
                        {
                            int max = block.blockItemsList.Count;
                            if (block.MaxLimit < block.blockItemsList.Count)
                            {
                                max = block.MaxLimit;
                            }
                            for (int i = 0; i < max; i++)
                            {
                                <div class="col-xs-6 col-sm-12 col-md-12" style="padding:0px;">
                                <a href="@block.blockItemsList[i].LinkUrl">
                                        <img alt="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(block.blockItemsList[i].Tooltip.ToLower())" src="@block.blockItemsList[i].ImageName" class="" title="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(block.blockItemsList[i].Tooltip.ToLower())" onerror="this.src = '/Content/Images/no_image.png'" style="width: 100%; border: 1px solid #c8cacc;" />
                                </a>
                                </div>
                            }
                        }
                    </div>*@
                @*End Code commentend by Yashaswi 20-2-2019 For Home Page Dynamic Sections*@
            </div>
            @*Start Code commentend by Yashaswi 20-2-2019 For Home Page Dynamic Sections*@
            @*and add in Main section main-body*@
            @*<div class="row-col-gap">
                    @{ block = Model.Where(x => x.Name.ToLower().Trim() == "bottom banner").FirstOrDefault();}
                    @if (block != null && block.blockItemsList != null)
                    {
                        int max = block.blockItemsList.Count;
                        if (block.MaxLimit < block.blockItemsList.Count)
                        {
                            max = block.MaxLimit;
                        }
                        for (int i = 0; i < max; i++)
                        {
                            <div class="col-xs-12 col-sm-3 newcolbottom animated fadeInUp" style="margin-bottom:5px;">
                                <a href="@block.blockItemsList[i].LinkUrl">
                                    <img alt="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(block.blockItemsList[i].Tooltip.ToLower())" src="@block.blockItemsList[i].ImageName" class="" title="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(block.blockItemsList[i].Tooltip.ToLower())" onerror="this.src = '/Content/Images/no_image.png'" style="width: 100%;height:160px" />
                                </a>
                            </div>
                        }
                    }

                </div>*@
            @*End Code commentend by Yashaswi 20-2-2019 For Home Page Dynamic Sections*@
        </div>
    </div>
    @*Start Code commentend by Yashaswi 20-2-2019 For Home Page Dynamic Sections*@
    @*and add in Main section main-body*@
    @*<div class="col-md-12">
            <h3 style="display:none">New Product</h3>
        </div>
        <div>
            @{ block = Model.Where(x => x.Name.ToLower().Trim() == "product gallery").FirstOrDefault();
                if (block != null && block.blockItemsList != null)
                {
                    int max = block.blockItemsList.Count;
                    if (block.MaxLimit < block.blockItemsList.Count)
                    {
                        max = block.MaxLimit;
                    }

                    for (int i = 0; i < max; i++)
                    {
                        string productName = block.blockItemsList[i].URLStructureName.ToLower();//Added for SEO URL Structure RULE by AShish
                        decimal mrp = 0, salerate = 0;
                        decimal.TryParse(block.blockItemsList[i].MRP.ToString(), out mrp);
                        decimal.TryParse(block.blockItemsList[i].RetailerRate.ToString(), out salerate);


                        <div class="col-xs-6 col-sm-4 col-md-3 col-lg-2">
                            <div class="product animated fadeInUp" style="    margin-bottom: 10px;">
                                <ul class="product-labels">


                                    <div class=" ">
                                        @if (mrp > salerate)
                                        {
                                            decimal offerValue = (mrp - salerate) / mrp * 100;
                                            decimal offerPercentage = Math.Floor(offerValue);

                                            if (offerPercentage > 0)
                                            {

                                                <ul class="product-labels" style="display:block">
                                                    <li>@offerPercentage % OFF</li>
                                                </ul>
                                            }
                                            else
                                            {
                                                <ul class="product-labels" style="display: none">
                                                    <li class="offerPercentage"></li>
                                                </ul>
                                            }
                                        }
                                        else
                                        {
                                            <ul class="product-labels" style="display: none">
                                                <li class="offerPercentage"></li>
                                            </ul>
                                        }

                                    </div>
                                </ul>

                                <ul class="product-labelsRP">
                                    <div class=" ">
                                        <ul class="product-labelsRP" style="display:block">
                                            <li>RP @block.blockItemsList[i].RetailPoint</li>
                                        </ul>
                                    </div>
                                </ul>

                                <div class="product-img-wrap">
                                    <a class="anchorRedirect" href="@Url.RouteUrl("pre-prod-name", new { itemId = block.blockItemsList[i].ProductID, itemName = productName, city = cityName, franchiseId = franchiseID })">
                                        <img class="product-img" alt="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(block.blockItemsList[i].Tooltip.ToLower())" src="@block.blockItemsList[i].ImageName" title="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(block.blockItemsList[i].Tooltip.ToLower())" onerror="this.src = '/Content/Images/no_image.png'" />
                                    </a>
                                </div>
                                @if (block.blockItemsList[i].Size.ToUpper().Trim() != "N/A")
                                {
                                    <span class="product-caption">Size - @block.blockItemsList[i].Size</span>
                                }
                                else
                                {
                                    <span class="product-caption">&nbsp;</span>
                                }
                                <div class="product-caption">
                                    @if (block.blockItemsList[i].ProductName.Length > 30)
                                    {

                                        <h5 class="product-caption-title">@block.blockItemsList[i].ProductName.Substring(0, Math.Min(block.blockItemsList[i].ProductName.Length, 27))...</h5>
                                    }
                                    else
                                    {
                                        <h5 class="product-caption-title">@block.blockItemsList[i].ProductName</h5>
                                    }

                                    <div class="product-caption-price">
                                        @if (mrp > salerate)
                                        {
                                            <span class="product-caption-price-old"><i class="fa fa-inr" aria-hidden="true"></i><del> @(mrp.ToString("0.00"))</del></span>
                                        }
                                        else
                                        {
                                            <span class="product-caption-price-new"></span>
                                        }
                                        <span class="product-caption-price-new" style="color:brown"><i class="fa fa-inr" aria-hidden="true"></i>  @(salerate.ToString("0.00"))</span>
                                    </div>
                                    <div class="product-caption-price">
                                        <a class="btn btn-success" href="@Url.RouteUrl("pre-prod-name", new { itemId = block.blockItemsList[i].ProductID, itemName = productName, city = cityName, franchiseId = franchiseID })">view</a>
                                        <input type="text" min="1" max="5" step="1" value="1" id="productQuantity" class="productQuantity" onchange="checkMaxQty(this)" style="width: 30px; height: 31px; text-align: center;">

                                        <button class="btn btn-warning" type="button" onclick="ShowPopUpForLocationAlert(@block.blockItemsList[i].ShopStockID,@block.blockItemsList[i].ProductID)" id="@block.blockItemsList[i].ProductID">Add<i class="fa fa-shopping-basket"></i></button>
                                    </div>
                                </div>
                            </div>

                        </div>

                    }
                }
            }
        </div>*@
    @*End Code commentend by Yashaswi 20-2-2019 For Home Page Dynamic Sections*@

    <main id="main-body">
        <div class="container-fluid">
            <div class="row">
                @*Added by Yashaswi 20-2-2019 For Home Page Dynamic Sections*@
                @{
                    int sliderIndex = -1;
                    List<ModelLayer.Models.ViewModel.HomePageDynamicViewModel> ListHomePageDynamicSection = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamic.OrderBy(p => p.SequenceOrder).ToList();
                    if (ListHomePageDynamicSection.Count > 0)
                    {
                        for (int i = 0; i < ListHomePageDynamicSection.Count; i++)
                        {
                            if (ListHomePageDynamicSection[i].SectionStyle.ToUpper() == "MAIN_BANNER")
                            {
                                <section class="main_Hero_banner_sldier_main">
                                    <div class="main_Hero_banner_sldier_main_inner">
                                        @if (ListHomePageDynamicSection[i].SectionDisplayName.ToLower() != "main banner")
                                        {
                                            <h4>@ListHomePageDynamicSection[i].SectionDisplayName</h4>
                                        }
                                        @if (ListHomePageDynamicSection[i].IsBanner)
                                        {
                                            List<ModelLayer.Models.ViewModel.HomePageDynamicBannerViewModel> listBanners = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicBanners.Where(p => p.HomePageDynamicSectionsId == ListHomePageDynamicSection[i].HomePageDynamicSectionsId && p.IsBanner == true).OrderBy(p => p.SequenceOrder).ToList();
                                            if (listBanners.Count > 0)
                                            {
                                                <div id="myCarousel" class="carousel slide leftSide-SliderInner col-md-12" data-ride="carousel">
                                                    <ol class="carousel-indicators">
                                                        @for (int i_banner = 0; i_banner < listBanners.Count; i_banner++)
                                                        {
                                                            <li data-target="#myCarousel" data-slide-to="@i_banner" class="@(i_banner == 0 ? "active" : "")"></li>
                                                        }
                                                    </ol>
                                                    <!-- Wrapper for slides -->
                                                    <div class="carousel-inner">
                                                        @for (int i_banner = 0; i_banner < listBanners.Count; i_banner++)
                                                        {
                                                            <div class="item @(i_banner == 0 ? "active" : "")">
                                                                <a href="@listBanners[i_banner].LinkURL"><img class="img-responsive" src="@System.Configuration.ConfigurationManager.AppSettings["HOMEPAGEDYNAMICSECTION_IMAGE_HTTP"]@listBanners[i_banner].ImageName" alt="@listBanners[i_banner].ToolTip" title="@listBanners[i_banner].ToolTip" style="width:100%;"></a>
                                                            </div>
                                                        }
                                                    </div>
                                                    <!-- Left and right controls -->
                                                    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                                                        <span class="glyphicon glyphicon-chevron-left fa fa-chevron-left"></span>
                                                        <span class="sr-only">Previous</span>
                                                    </a>
                                                    <a class="right carousel-control" href="#myCarousel" data-slide="next">
                                                        <span class="glyphicon glyphicon-chevron-right fa fa-chevron-right"></span>
                                                        <span class="sr-only">Next</span>
                                                    </a>
                                                </div>
                                            }
                                        }

                                    </div>
                                </section>
                            }
                            if (ListHomePageDynamicSection[i].SectionStyle.ToUpper() == "BOTTOM_BANNER")
                            {
                                <div class="container">
                                    <div id="home-slider">
                                        <div class="row">
                                            <div class="row-col-gap">
                                                @if (ListHomePageDynamicSection[i].IsCategory)
                                                {
                                                    List<ModelLayer.Models.ViewModel.HomePageDynamicBannerViewModel> listBanners = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicBanners.Where(p => p.HomePageDynamicSectionsId == ListHomePageDynamicSection[i].HomePageDynamicSectionsId && p.IsBanner == false).OrderBy(p => p.SequenceOrder).ToList();
                                                    if (listBanners.Count > 0)
                                                    {
                                                        for (int i_banner = 0; i_banner < listBanners.Count; i_banner++)
                                                        {
                                                            <div class="col-xs-12 col-sm-3 newcolbottom animated fadeInUp" style="margin-bottom:5px;">
                                                                <a href="@listBanners[i_banner].LinkURL">
                                                                    <img alt="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(listBanners[i_banner].ToolTip.ToLower())" src="@System.Configuration.ConfigurationManager.AppSettings["HOMEPAGEDYNAMICSECTION_IMAGE_HTTP"]@listBanners[i_banner].ImageName" class="" title="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(listBanners[i_banner].ToolTip.ToLower())" onerror="this.src = '/Content/Images/no_image.png'" style="width: 100%;height:160px" />
                                                                </a>
                                                            </div>
                                                        }
                                                    }
                                                }
                                            </div>
                                        </div>
                                    </div>




                                </div>
                            }
                            if (ListHomePageDynamicSection[i].SectionStyle.ToUpper() == "LEFT_SQUARE_MAIN_BANNER_AND_RIGHT_FOUR_SUBCAT_BANNERS")
                            {
                                <section class="personalCare">
                                    <div class="container">
                                        <div class="row">
                                            <div class="personalCareMain">
                                                <h4>@ListHomePageDynamicSection[i].SectionDisplayName</h4>
                                                <div class="personalCareInnerContent">
                                                    @if (ListHomePageDynamicSection[i].IsBanner)
                                                    {
                                                        {
                                                            List<ModelLayer.Models.ViewModel.HomePageDynamicBannerViewModel> listBanners = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicBanners.Where(p => p.HomePageDynamicSectionsId == ListHomePageDynamicSection[i].HomePageDynamicSectionsId && p.IsBanner == true).OrderBy(p => p.SequenceOrder).ToList();
                                                            if (listBanners.Count > 0)
                                                            {
                                                                <div class="col-lg-6 col-md-6 col-sm-12 leftSide-Slider">
                                                                    <div id="grocery_Slider" class="carousel slide leftSide-SliderInner col-md-12" data-ride="carousel">
                                                                        <ol class="carousel-indicators">
                                                                            @for (int i_banner = 0; i_banner < listBanners.Count; i_banner++)
                                                                            {
                                                                                <li data-target="#grocery_Slider" data-slide-to="@i_banner" class="@(i_banner == 0 ? "active" : "")"></li>
                                                                            }
                                                                        </ol>
                                                                        <!-- Wrapper for slides -->
                                                                        <div class="carousel-inner">
                                                                            @for (int i_banner = 0; i_banner < listBanners.Count; i_banner++)
                                                                            {
                                                                                <div class="item @(i_banner == 0 ? "active" : "")">
                                                                                    <a href="@listBanners[i_banner].LinkURL"><img class="img-responsive" src="@System.Configuration.ConfigurationManager.AppSettings["HOMEPAGEDYNAMICSECTION_IMAGE_HTTP"]@listBanners[i_banner].ImageName" alt="@listBanners[i_banner].ToolTip" title="@listBanners[i_banner].ToolTip" style="width:100%;"></a>
                                                                                </div>
                                                                            }
                                                                        </div>
                                                                        <!-- Left and right controls -->
                                                                        <a class="left carousel-control" href="#grocery_Slider" data-slide="prev">
                                                                            <span class="glyphicon glyphicon-chevron-left fa fa-chevron-left"></span>
                                                                            <span class="sr-only">Previous</span>
                                                                        </a>
                                                                        <a class="right carousel-control" href="#grocery_Slider" data-slide="next">
                                                                            <span class="glyphicon glyphicon-chevron-right fa fa-chevron-right"></span>
                                                                            <span class="sr-only">Next</span>
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            }
                                                        }
                                                    }
                                                    <!--end of slider leftSide-->

                                                    @if (ListHomePageDynamicSection[i].IsCategory)
                                                    {
                                                        List<ModelLayer.Models.ViewModel.HomePageDynamicBannerViewModel> listCategory = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicBanners.Where(p => p.HomePageDynamicSectionsId == ListHomePageDynamicSection[i].HomePageDynamicSectionsId && p.IsBanner == false).OrderByDescending(p => p.CreateDate).Take(4).OrderBy(p => p.SequenceOrder).OrderBy(p => p.SequenceOrder).ToList();
                                                        if (listCategory.Count > 0)
                                                        {
                                                            <div class="col-lg-6 col-md-6 col-sm-12 simple_rightSide-gallery">
                                                                <div class="simple_rightSide-galleryInner">
                                                                    <ul>
                                                                        @for (int i_category = 0; i_category < listCategory.Count; i_category++)
                                                                        {
                                                                            <li class="col-md-6 col-sm-6 col-xs-6">
                                                                                <a href="@listCategory[i_category].LinkURL" title="@listCategory[i_category].ToolTip">
                                                                                    <figure>
                                                                                        <img class="img-responsive" src="@System.Configuration.ConfigurationManager.AppSettings["HOMEPAGEDYNAMICSECTION_IMAGE_HTTP"]@listCategory[i_category].ImageName" />
                                                                                    </figure>
                                                                                </a>
                                                                            </li>
                                                                        }

                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        }
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            }
                            if (ListHomePageDynamicSection[i].SectionStyle.ToUpper() == "FULL_WIDTH_MAIN_BANNER_AND_BELOW_THREE_SUBCAT_BANNERS")
                            {
                                <section class="Grocery">
                                    <div class="container">
                                        <div class="row">
                                            <div class="GroceryMain">
                                                <h4>@ListHomePageDynamicSection[i].SectionDisplayName</h4>
                                                <div class="GroceryInnerContent">
                                                    @if (ListHomePageDynamicSection[i].IsBanner)
                                                    {
                                                        List<ModelLayer.Models.ViewModel.HomePageDynamicBannerViewModel> listBanners = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicBanners.Where(p => p.HomePageDynamicSectionsId == ListHomePageDynamicSection[i].HomePageDynamicSectionsId && p.IsBanner == true).OrderBy(p => p.SequenceOrder).ToList();
                                                        if (listBanners.Count > 0)
                                                        {
                                                            <div class="fullSizeSlider">
                                                                <!-- The carousel -->
                                                                <div id="personalCare_slider_" class="carousel slide transition-timer-carousel" data-ride="carousel">
                                                                    <!-- Indicators -->
                                                                    <ol class="carousel-indicators">
                                                                        @for (int i_banner = 0; i_banner < listBanners.Count; i_banner++)
                                                                        {
                                                                            <li data-target="#personalCare_slider_" data-slide-to="@i_banner" class="@(i_banner == 0 ? "active" : "")"></li>
                                                                        }
                                                                    </ol>
                                                                    <!-- Wrapper for slides -->
                                                                    <div class="carousel-inner groceryInnerContentofBanner">
                                                                        @for (int i_banner = 0; i_banner < listBanners.Count; i_banner++)
                                                                        {
                                                                            <div class="item @(i_banner == 0 ? "active" : "")">
                                                                                <a href="@listBanners[i_banner].LinkURL">
                                                                                    <img src="@System.Configuration.ConfigurationManager.AppSettings["HOMEPAGEDYNAMICSECTION_IMAGE_HTTP"]@listBanners[i_banner].ImageName" alt="@listBanners[i_banner].ToolTip" title="@listBanners[i_banner].ToolTip" />
                                                                                </a>
                                                                            </div>
                                                                        }
                                                                    </div>
                                                                    <!-- Controls -->
                                                                    <a class="left carousel-control" href="#personalCare_slider_" data-slide="prev">
                                                                        <span class="glyphicon glyphicon-chevron-left fa fa-chevron-left"></span>
                                                                    </a>
                                                                    <a class="right carousel-control" href="#personalCare_slider_" data-slide="next">
                                                                        <span class="glyphicon glyphicon-chevron-right fa fa-chevron-right"></span>
                                                                    </a>
                                                                    <!-- Timer "progress bar" -->
                                                                </div>

                                                            </div>
                                                        }
                                                    }
                                                    @if (ListHomePageDynamicSection[i].IsCategory)
                                                    {
                                                        List<ModelLayer.Models.ViewModel.HomePageDynamicBannerViewModel> listCategory = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicBanners.Where(p => p.HomePageDynamicSectionsId == ListHomePageDynamicSection[i].HomePageDynamicSectionsId && p.IsBanner == false).OrderByDescending(p => p.CreateDate).Take(3).OrderBy(p => p.SequenceOrder).OrderBy(p => p.SequenceOrder).ToList();
                                                        if (listCategory.Count > 0)
                                                        {
                                                            <div class="GroceryPartDownImages">
                                                                @for (int i_category = 0; i_category < listCategory.Count; i_category++)
                                                                {
                                                                    <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                                        <a href="@listCategory[i_category].LinkURL" title="@listCategory[i_category].ToolTip">
                                                                            <figure><img class="img-responsive" src="@System.Configuration.ConfigurationManager.AppSettings["HOMEPAGEDYNAMICSECTION_IMAGE_HTTP"]@listCategory[i_category].ImageName" /></figure>
                                                                        </a>
                                                                    </div>
                                                                }
                                                            </div>
                                                        }
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            }
                            if (ListHomePageDynamicSection[i].SectionStyle.ToUpper() == "FOUR_SUBCAT_BANNERS")
                            {
                                <section class="HouseHold">
                                    <div class="container">
                                        <div class="row">
                                            <div class="HouseHoldMain">
                                                <h4>@ListHomePageDynamicSection[i].SectionDisplayName</h4>
                                                @if (ListHomePageDynamicSection[i].IsCategory)
                                                {
                                                    List<ModelLayer.Models.ViewModel.HomePageDynamicBannerViewModel> listCategory = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicBanners.Where(p => p.HomePageDynamicSectionsId == ListHomePageDynamicSection[i].HomePageDynamicSectionsId && p.IsBanner == false).OrderByDescending(p => p.CreateDate).Take(4).OrderBy(p => p.SequenceOrder).ToList();
                                                    if (listCategory.Count > 0)
                                                    {
                                                        <div class="HouseHoldInnerContent">
                                                            @for (int i_category = 0; i_category < listCategory.Count; i_category++)
                                                            {
                                                                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-6">
                                                                    <a href="@listCategory[i_category].LinkURL">
                                                                        <figure><img class="img-responsive" src="@System.Configuration.ConfigurationManager.AppSettings["HOMEPAGEDYNAMICSECTION_IMAGE_HTTP"]@listCategory[i_category].ImageName" /></figure>
                                                                    </a>
                                                                </div>
                                                            }
                                                        </div>
                                                    }
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            }
                            if (ListHomePageDynamicSection[i].SectionStyle.ToUpper() == "TWO_FIRST_ROW_TWO_SECOND_ROW")
                            {
                                <section class="BrandedFood">
                                    <div class="container">
                                        <div class="row">
                                            <div class="BrandedFoodMain">
                                                <h4>@ListHomePageDynamicSection[i].SectionDisplayName</h4>
                                                @if (ListHomePageDynamicSection[i].IsCategory)
                                                {
                                                    List<ModelLayer.Models.ViewModel.HomePageDynamicBannerViewModel> listCategory = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicBanners.Where(p => p.HomePageDynamicSectionsId == ListHomePageDynamicSection[i].HomePageDynamicSectionsId && p.IsBanner == false).OrderBy(p => p.SequenceOrder).ToList();
                                                    if (listCategory.Count > 0)
                                                    {
                                                        <div class="BrandedFoodInnerContent">
                                                            @for (int i_category = 0; i_category < listCategory.Count; i_category++)
                                                            {
                                                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 BrandedFoodIMG @(i_category%2==0?"foodBranded":"foodBrandedItem")"><a href="@listCategory[i_category].LinkURL"><figure><img class="img-responsive" src="@System.Configuration.ConfigurationManager.AppSettings["HOMEPAGEDYNAMICSECTION_IMAGE_HTTP"]@listCategory[i_category].ImageName" /></figure></a></div>
                                                            }
                                                        </div>
                                                    }
                                                }

                                            </div>
                                        </div>
                                    </div>
                                </section>
                            }
                            if (ListHomePageDynamicSection[i].SectionStyle.ToUpper() == "FULL_WIDTH_MAIN_BANNER_AND_PRODUCT_BELOW")
                            {
                                <section class="Grocery">
                                    <div class="GroceryMain">
                                        <div class="container">
                                            <div class="row">
                                                <h4>@ListHomePageDynamicSection[i].SectionDisplayName</h4>
                                                @if (ListHomePageDynamicSection[i].IsBanner)
                                                {
                                                    List<ModelLayer.Models.ViewModel.HomePageDynamicBannerViewModel> listBanners = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicBanners.Where(p => p.HomePageDynamicSectionsId == ListHomePageDynamicSection[i].HomePageDynamicSectionsId && p.IsBanner == true).OrderBy(p => p.SequenceOrder).ToList();
                                                    if (listBanners.Count > 0)
                                                    {
                                                        sliderIndex = sliderIndex + 1;
                                                        <section class="slider-main-head">
                                                            <div class="container">
                                                                <div class='row'>
                                                                    <div class='col-lg-12 col-md-12 col-sm-12 col-xs-12'>
                                                                        <div class="carousel slide inner_ofSlider" data-ride="carousel" id="slider_@sliderIndex">
                                                                            <!-- Bottom Carousel Indicators -->
                                                                            <ol class="carousel-indicators">
                                                                                @for (int i_banner = 0; i_banner < listBanners.Count; i_banner++)
                                                                                {
                                                                                    <li data-target="#slider_@sliderIndex" data-slide-to="@i_banner" class="@(i_banner == 0 ? "active" : "")"></li>
                                                                                }
                                                                            </ol>

                                                                            <!-- Carousel Slides / Quotes -->
                                                                            <div class="carousel-inner">
                                                                                <div class="carousel-inner groceryInnerContentofBanner">
                                                                                    @for (int i_banner = 0; i_banner < listBanners.Count; i_banner++)
                                                                                    {
                                                                                        <div class="item @(i_banner == 0 ? "active" : "")">
                                                                                            <blockquote>
                                                                                                <div class="row">
                                                                                                    <div class="col-sm-12 text-center">
                                                                                                        <a href="@listBanners[i_banner].LinkURL">
                                                                                                            <img src="@System.Configuration.ConfigurationManager.AppSettings["HOMEPAGEDYNAMICSECTION_IMAGE_HTTP"]@listBanners[i_banner].ImageName" alt="@listBanners[i_banner].ToolTip" title="@listBanners[i_banner].ToolTip" />
                                                                                                        </a>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </blockquote>
                                                                                        </div>
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                            <div class="button_left_right">
                                                                                <!-- Carousel Buttons Next/Prev -->
                                                                                <a data-slide="prev" href="#slider_@sliderIndex" class="left carousel-control"><i class="fa fa-chevron-left"></i></a>
                                                                                <a data-slide="next" href="#slider_@sliderIndex" class="right carousel-control"><i class="fa fa-chevron-right"></i></a>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </section>
                                                    }
                                                }
                                                @if (ListHomePageDynamicSection[i].IsProduct)
                                                {
                                                    List<ModelLayer.Models.ViewModel.HomePageBlockItemsViewModel> listProduct = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicProducts.Where(p => p.HomePageDynamicSectionsId == ListHomePageDynamicSection[i].HomePageDynamicSectionsId).OrderBy(p => p.SequenceOrder).ToList();
                                                    if (listProduct.Count > 0)
                                                    {<div class="LISt-of_products-main_">
                                                            @if (listProduct != null && listProduct != null)
                                                            {
                                                                for (int i_product = 0; i_product < (6 * (listProduct.Count / 6)); i_product++)
                                                                {
                                                                    string productName = listProduct[i_product].URLStructureName.ToLower();
                                                                    decimal mrp = 0, salerate = 0;
                                                                    decimal.TryParse(listProduct[i_product].MRP.ToString(), out mrp);
                                                                    decimal.TryParse(listProduct[i_product].RetailerRate.ToString(), out salerate);

                                                                    <div class="col-xs-6 col-sm-4 col-md-2 col-lg-2">
                                                                        <div class="product animated fadeInUp" style="    margin-bottom: 10px;">
                                                                            <ul class="product-labels">
                                                                                <div>
                                                                                    @if (mrp > salerate)
                                                                                    {
                                                                                        decimal offerValue = (mrp - salerate) / mrp * 100;
                                                                                        decimal offerPercentage = Math.Floor(offerValue);

                                                                                        if (offerPercentage > 0)
                                                                                        {

                                                                                            <ul class="product-labels" style="display:block">
                                                                                                <li>@offerPercentage % OFF</li>
                                                                                            </ul>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <ul class="product-labels" style="display: none">
                                                                                                <li class="offerPercentage"></li>
                                                                                            </ul>
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <ul class="product-labels" style="display: none">
                                                                                            <li class="offerPercentage"></li>
                                                                                        </ul>
                                                                                    }

                                                                                </div>
                                                                            </ul>
                                                                            <ul class="product-labelsRP">
                                                                                <div class=" ">
                                                                                    <ul class="product-labelsRP" style="display:block">
                                                                                        <li>RP @listProduct[i_product].RetailPoint</li>
                                                                                    </ul>
                                                                                </div>
                                                                            </ul>
                                                                            <ul class="product-labelsCB">
                                                                                <div class=" ">
                                                                                    <ul class="product-labelsCB" style="display:block">
                                                                                        <li>CP @listProduct[i_product].CashbackPoint</li>
                                                                                    </ul>
                                                                                </div>
                                                                            </ul>
                                                                            <div class="product-img-wrap">
                                                                                <a class="anchorRedirect" href="@Url.RouteUrl("pre-prod-name", new { itemId = listProduct[i_product].ProductID, itemName = productName, city = cityName, franchiseId = franchiseID })">
                                                                                    <img class="product-img" alt="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(listProduct[i_product].Tooltip.ToLower())" src="@listProduct[i_product].ImageName" title="@CultureInfo.CurrentCulture.TextInfo.ToTitleCase(listProduct[i_product].Tooltip.ToLower())" onerror="this.src = '/Content/Images/no_image.png'" />
                                                                                </a>
                                                                            </div>
                                                                            @if (listProduct[i_product].Size.ToUpper().Trim() != "N/A")
                                                                            {
                                                                                <span class="product-caption">Size - @listProduct[i_product].Size</span>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span class="product-caption">&nbsp;</span>
                                                                            }
                                                                            <div class="product-caption">
                                                                                @if (listProduct[i_product].ProductName.Length > 30)
                                                                                {

                                                                                    <h5 class="product-caption-title">@listProduct[i_product].ProductName.Substring(0, Math.Min(listProduct[i_product].ProductName.Length, 27))...</h5>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <h5 class="product-caption-title">@listProduct[i_product].ProductName</h5>
                                                                                }

                                                                                <div class="product-caption-price">
                                                                                    @if (mrp > salerate)
                                                                                    {
                                                                                        <span class="product-caption-price-old"><i class="fa fa-inr" aria-hidden="true"></i><del> @(mrp.ToString("0.00"))</del></span>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <span class="product-caption-price-new"></span>
                                                                                    }
                                                                                    <span class="product-caption-price-new" style="color:brown"><i class="fa fa-inr" aria-hidden="true"></i>  @(salerate.ToString("0.00"))</span>
                                                                                </div>
                                                                                <div class="product-caption-price">
                                                                                    <a class="btn btn-success" href="@Url.RouteUrl("pre-prod-name", new { itemId = listProduct[i_product].ProductID, itemName = productName, city = cityName, franchiseId = franchiseID })">view</a>
                                                                                    <input type="text" min="1" max="5" step="1" value="1" id="productQuantity" class="productQuantity" onchange="checkMaxQty(this)" style="width: 30px; height: 31px; text-align: center;">
                                                                                    <button class="btn btn-warning" type="button" onclick="ShowPopUpForLocationAlert(@listProduct[i_product].ShopStockID,@listProduct[i_product].ProductID)" id="@listProduct[i_product].ProductID">Add<i class="fa fa-shopping-cart"></i></button>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                    </div>

                                                                }
                                                            }

                                                        </div>
                                                    }
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            }
                            if (ListHomePageDynamicSection[i].SectionStyle.ToUpper() == "LOGO_SLIDER")
                            {
                                <section class="logo-slider">
                                    <div class="container">
                                        <h4>@ListHomePageDynamicSection[i].SectionDisplayName</h4>
                                        @if (ListHomePageDynamicSection[i].IsCategory)
                                        {
                                            List<ModelLayer.Models.ViewModel.HomePageDynamicBannerViewModel> listCategory = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicBanners.Where(p => p.HomePageDynamicSectionsId == ListHomePageDynamicSection[i].HomePageDynamicSectionsId && p.IsBanner == false).OrderBy(p => p.SequenceOrder).ToList();
                                            if (listCategory.Count > 0)
                                            {
                                                <div class="row">
                                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                                        <div id="Carousel" class="carousel slide logo-slider_inner">
                                                            <ol class="carousel-indicators">
                                                                <li data-target="#Carousel" data-slide-to="0" class="active"></li>
                                                                <li data-target="#Carousel" data-slide-to="1"></li>
                                                                <li data-target="#Carousel" data-slide-to="2"></li>
                                                                <li data-target="#Carousel" data-slide-to="3"></li>
                                                            </ol>
                                                            <div class="carousel-inner">
                                                                @for (int i_category = 0; i_category < listCategory.Count; i_category++)
                                                                {
                                                                    <div class="item @(i_category == 0 ? "active" : "")">
                                                                        <div class="row">
                                                                            <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="@System.Configuration.ConfigurationManager.AppSettings["HOMEPAGEDYNAMICSECTION_IMAGE_HTTP"]@listCategory[i_category].ImageName" alt="@listCategory[i_category].ToolTip" title="@listCategory[i_category].ToolTip"></a></div>
                                                                        </div>
                                                                    </div>
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                        }
                                    </div>
                                </section>
                            }
                        }
                    }
                }
                @*End by Yashaswi 20-2-2019 For Home Page Dynamic Sections*@

                @*@{
                        ModelLayer.Models.ViewModel.HomePageDynamicViewModel objHomePageDynamic_GroceryAndStaples = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamic.ToList().FirstOrDefault(p => p.SectionId == 12);
                    }
                    @if (objHomePageDynamic_GroceryAndStaples != null)
                    {
                        <section class="personalCare">
                            <div class="personalCareMain">
                                <h4>@objHomePageDynamic_GroceryAndStaples.SectionDisplayName</h4>
                                <div class="personalCareInnerContent">
                                    @if (objHomePageDynamic_GroceryAndStaples.IsBanner)
                                    {
                                        {
                                            List<ModelLayer.Models.ViewModel.HomePageDynamicBannerViewModel> list12Banners = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicBanners.Where(p => p.HomePageDynamicSectionsId == objHomePageDynamic_GroceryAndStaples.HomePageDynamicSectionsId && p.IsBanner == true).ToList();
                                            if (list12Banners.Count > 0)
                                            {
                                                <div class="col-lg-6 col-md-6 col-sm-12 leftSide-Slider">
                                                    <div id="myCarousel" class="carousel slide leftSide-SliderInner col-md-12" data-ride="carousel">
                                                        <ol class="carousel-indicators">
                                                            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                                                            <li data-target="#myCarousel" data-slide-to="1"></li>
                                                        </ol>
                                                        <!-- Wrapper for slides -->
                                                        <div class="carousel-inner">
                                                            @for (int i = 0; i < list12Banners.Count; i++)
                                                            {
                                                                <div class="item @(i == 0 ? "active" : "")">
                                                                    <a href="@list12Banners[i].LinkURL"><img class="img-responsive" src="@System.Configuration.ConfigurationManager.AppSettings["HOMEPAGEDYNAMICSECTION_IMAGE_HTTP"]@list12Banners[i].ImageName" alt="@list12Banners[i].ToolTip" title="@list12Banners[i].ToolTip" style="width:100%;"></a>
                                                                </div>
                                                            }
                                                        </div>
                                                        <!-- Left and right controls -->
                                                        <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                                                            <span class="glyphicon glyphicon-chevron-left fa fa-chevron-left"></span>
                                                            <span class="sr-only">Previous</span>
                                                        </a>
                                                        <a class="right carousel-control" href="#myCarousel" data-slide="next">
                                                            <span class="glyphicon glyphicon-chevron-right fa fa-chevron-right"></span>
                                                            <span class="sr-only">Next</span>
                                                        </a>
                                                    </div>
                                                </div>
                                            }
                                        }
                                    }
                                    <!--end of slider leftSide-->

                                    @if (objHomePageDynamic_GroceryAndStaples.IsCategory)
                                    {
                                        List<ModelLayer.Models.ViewModel.HomePageDynamicBannerViewModel> list12Category = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicBanners.Where(p => p.HomePageDynamicSectionsId == objHomePageDynamic_GroceryAndStaples.HomePageDynamicSectionsId && p.IsBanner == false).ToList();
                                        if (list12Category.Count > 0)
                                        {
                                            <div class="col-lg-6 col-md-6 col-sm-12 simple_rightSide-gallery">
                                                <div class="simple_rightSide-galleryInner">
                                                    <ul>
                                                        @for (int i = 0; i < list12Category.Count; i++)
                                                        {
                                                            <li class="col-md-6 col-sm-6 col-xs-6">
                                                                <a href="@list12Category[i].LinkURL">
                                                                    <figure>
                                                                        <img class="img-responsive" src="@System.Configuration.ConfigurationManager.AppSettings["HOMEPAGEDYNAMICSECTION_IMAGE_HTTP"]@list12Category[i].ImageName" />
                                                                    </figure>
                                                                </a>
                                                            </li>
                                                        }

                                                    </ul>
                                                </div>
                                            </div>
                                        }
                                    }
                                </div>
                            </div>
                        </section>
                    }*@

                @*@{
                        ModelLayer.Models.ViewModel.HomePageDynamicViewModel objHomePageDynamic_PersonalCare = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamic.ToList().FirstOrDefault(p => p.SectionId == 13);
                    }
                    @if (objHomePageDynamic_PersonalCare != null)
                    {
                        <section class="Grocery">
                            <div class="GroceryMain">
                                <h4>@objHomePageDynamic_PersonalCare.SectionDisplayName</h4>
                                <div class="GroceryInnerContent">
                                    <div class="fullSizeSlider">
                                        <!-- The carousel -->
                                        <div id="transition-timer-carousel" class="carousel slide transition-timer-carousel" data-ride="carousel">
                                            <!-- Indicators -->
                                            <ol class="carousel-indicators">
                                                <li data-target="#transition-timer-carousel" data-slide-to="0" class="active"></li>
                                                <li data-target="#transition-timer-carousel" data-slide-to="1"></li>
                                            </ol>

                                            <!-- Wrapper for slides -->
                                            @if (objHomePageDynamic_PersonalCare.IsBanner)
                                            {
                                                <div class="carousel-inner groceryInnerContentofBanner">
                                                    @{List<ModelLayer.Models.ViewModel.HomePageDynamicBannerViewModel> list13Banners = Model.Where(x => x.Name.ToLower().Trim() == "dynamicsections").FirstOrDefault().listHomePageDynamicBanners.Where(p => p.HomePageDynamicSectionsId == objHomePageDynamic_PersonalCare.HomePageDynamicSectionsId && p.IsBanner == true).ToList(); }
                                                    @for (int i = 0; i < list13Banners.Count; i++)
                                                    {
                                                        <div class="item @(i == 0  ? "active" : "")">
                                                            <a href="@list13Banners[i].LinkURL">
                                                                <img src="@System.Configuration.ConfigurationManager.AppSettings["HOMEPAGEDYNAMICSECTION_IMAGE_HTTP"]@list13Banners[i].ImageName" alt="@list13Banners[i].ToolTip" title="@list13Banners[i].ToolTip" />
                                                            </a>
                                                        </div>
                                                    }
                                                </div>
                                            }

                                            <!-- Controls -->
                                            <a class="left carousel-control" href="#transition-timer-carousel" data-slide="prev">
                                                <span class="glyphicon glyphicon-chevron-left fa fa-chevron-left"></span>
                                            </a>
                                            <a class="right carousel-control" href="#transition-timer-carousel" data-slide="next">
                                                <span class="glyphicon glyphicon-chevron-right fa fa-chevron-right"></span>
                                            </a>

                                            <!-- Timer "progress bar" -->

                                        </div>

                                    </div>

                                    <div class="GroceryPartDownImages">

                                        <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                            <a href="@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]kanpur/1052/personal-care/deo-and-perfume/1313/1318/category">
                                                <figure><img class="img-responsive" src="/Content/img/grocery-img-1.jpg" /></figure>
                                            </a>
                                        </div>


                                        <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                            <a href="@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]kanpur/1052/personal-care/bathing-and-body-care/1313/1314/category">
                                                <figure><img class="img-responsive" src="/Content/img/grocery-img-2.jpg" /></figure>
                                            </a>
                                        </div>


                                        <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                            <a href="@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]kanpur/1052/personal-care/hair-care/1313/1315/category">
                                                <figure><img class="img-responsive" src="/Content/img/grocery-img-3.jpg" /></figure>
                                            </a>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </section>
                    }*@


                @*<section class="HouseHold">
                        <div class="HouseHoldMain">
                            <h4>HouseHold</h4>
                            <div class="HouseHoldInnerContent">
                                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-6">
                                    <a href="@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]kanpur/1052/home-care/1116/cat-products">
                                        <figure><img class="img-responsive" src="/Content/img/houseHole-img-1.jpg" /></figure>
                                    </a>
                                </div>
                                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-6">
                                    <a href="@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]kanpur/1052/toilet-care/1312/cat-products">
                                        <figure><img class="img-responsive" src="/Content/img/houseHole-img-2.jpg" /></figure>
                                    </a>
                                </div>
                                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-6">
                                    <a href="@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]kanpur/1052/fabric-care/1125/cat-products">
                                        <figure><img class="img-responsive" src="/Content/img/houseHole-img-3.jpg" /></figure>
                                    </a>
                                </div>
                                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-6">
                                    <a href="@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]kanpur/1052/sanitary-pads/1301/cat-products">
                                        <figure><img class="img-responsive" src="/Content/img/houseHole-img-4.jpg" /></figure>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </section>*@

                @*<section class="BrandedFood">
                        <div class="BrandedFoodMain">
                            <h4>Branded Food</h4>
                            <div class="BrandedFoodInnerContent">
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 BrandedFoodIMG foodBranded"><a href="@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]kanpur/1052/products?item=bikaji"><figure><img class="img-responsive" src="/Content/img/branded-food-1.jpg" /></figure></a></div>
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 BrandedFoodIMG foodBrandedItem"><a href="@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]kanpur/1052/knorr/1159/cat-products"><figure><img class="img-responsive" src="/Content/img/branded-food-2.jpg" /></figure></a></div>
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 BrandedFoodIMG foodBranded"><a href="@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]kanpur/1052/products?item=kissan"><figure><img class="img-responsive" src="/Content/img/branded-food-3.jpg" /></figure></a></div>
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 BrandedFoodIMG foodBrandedItem"><a href="@System.Configuration.ConfigurationManager.AppSettings["EZEELO_CUSTOMER_URL"]kanpur/1052/products?item=manzana"><figure><img class="img-responsive" src="/Content/img/branded-food-4.jpg" /></figure></a></div>
                            </div>
                        </div>
                    </section>*@

                @*<section class="logo-slider">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <div id="Carousel" class="carousel slide logo-slider_inner">

                                        <ol class="carousel-indicators">
                                            <li data-target="#Carousel" data-slide-to="0" class="active"></li>
                                            <li data-target="#Carousel" data-slide-to="1"></li>
                                            <li data-target="#Carousel" data-slide-to="2"></li>
                                            <li data-target="#Carousel" data-slide-to="3"></li>
                                        </ol>

                                        <!-- Carousel items -->
                                        <div class="carousel-inner">

                                            <div class="item active">
                                                <div class="row">
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-1.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-2.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-3.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-4.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-5.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-6.png" alt="Image"></a></div>
                                                </div><!--.row-->
                                            </div><!--.item-->

                                            <div class="item">
                                                <div class="row">
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-7.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:/" class="thumbnail"><img class="img-responsive" src="/Content/img/l-8.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-9.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-10.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-11.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-12.png" alt="Image"></a></div>
                                                </div><!--.row-->
                                            </div><!--.item-->

                                            <div class="item">
                                                <div class="row">
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-13.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-14.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-15.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-16.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-17.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-18.png" alt="Image"></a></div>
                                                </div>
                                            </div>

                                            <div class="item">
                                                <div class="row">
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-19.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-20.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-21.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-22.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-23.png" alt="Image"></a></div>
                                                    <div class="col-md-2 col-xs-4"><a href="javascript:" class="thumbnail"><img class="img-responsive" src="/Content/img/l-24.png" alt="Image"></a></div>
                                                </div>
                                            </div>

                                        </div>



                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>*@





                <script>
                    $(document).ready(function () {
                        $('#Carousel').carousel({
                            interval: 3000
                        })
                    });
                </script>

                @*<script>
                        $(document).ready(function () {

                            //$(document).on("slide.bs.carousel", "[id^=transition-timer-carousel]", function () {
                            //   console.log("")
                            //});
                            var classList = $("[id^=transition-timer-carousel]");
                            $(classList).each(function (index) {
                                $(document).on("slide.bs.carousel", $(this), function () {
                                    //console.log('--start--')
                                    //console.log($(this))
                                    //console.log('--end--')
                                    $(".transition-timer-carousel-progress-bar", this)
                                        .removeClass("animate").css("width", "0%");
                                }).on("slid.bs.carousel", function (event) {
                                    //The slide transition finished, so re-add the animate class so that
                                    //the timer bar takes time to fill up
                                    $(".transition-timer-carousel-progress-bar", this)
                                        .addClass("animate").css("width", "100%");
                                });
                            });

                            //Events that reset and restart the timer animation when the slides change
                            //$('[id^=transition-timer-carousel]').on("slide.bs.carousel", function (event) {

                            //    // $("#transition-timer-carousel").on("slide.bs.carousel", function (event) {
                            //    //The animate class gets removed so that it jumps straight back to 0%
                            //    $(".transition-timer-carousel-progress-bar", this)
                            //        .removeClass("animate").css("width", "0%");
                            //}).on("slid.bs.carousel", function (event) {
                            //    //The slide transition finished, so re-add the animate class so that
                            //    //the timer bar takes time to fill up
                            //    $(".transition-timer-carousel-progress-bar", this)
                            //        .addClass("animate").css("width", "100%");
                            //});

                            //Kick off the initial slide animation when the document is ready
                            $(".transition-timer-carousel-progress-bar").css("width", "100%");
                            $('[id^=transition-timer-carousel]').css("width", "100%");
                            //$(".transition-timer-carousel-progress-bar", "#transition-timer-carousel")
                            //    .css("width", "100%");
                        });
                    </script>*@
            </div>
        </div>
    </main>

</div>
<script type="text/javascript">
    $(document).ready(function () {

        //added for url routing - by snehal
        var city = getCookie("CityCookie");
        if (city == null || city == "" || city == undefined) {
            //city = "nagpur";
            city = "";
            franchiseId = "";//added
            //Update By Ajit For URL : "eZeelo"
            //var _url = '@(Html.Raw(Url.RouteUrl("Default", new { city = "_city_" })))';//hide franchiseId
            // history.replaceState(null, document.title, _url.replace("_city_", city));//hide franchiseId

            var _url = '@(Html.Raw(Url.RouteUrl("Default", new { city = "_city_", franchiseId="_franchiseId_" })))';//added franchiseId by Ashish for multiple frnachise in same city
            history.replaceState(null, document.title, _url.replace("_city_", city).replace("_franchiseId_", city.split("$")[2]));//added franchiseId by Ashish for multiple frnachise in same city
        }
        else if (window.location.href.indexOf(city.split("$")[1]) == -1) {
            //var _url = '@(Html.Raw(Url.RouteUrl("Default", new { city = "_city_"})))';//hide franchiseId
            //history.replaceState(null, document.title, _url.replace("_city_", city.split("$")[1].toLowerCase()));//hide franchiseId

            var _url = '@(Html.Raw(Url.RouteUrl("Default", new { city = "_city_", franchiseId="_franchiseId_" })))';//added franchiseId by Ashish for multiple frnachise in same city
            history.replaceState(null, document.title, _url.replace("_city_", city.split("$")[1].toLowerCase()).replace("_franchiseId_", city.split("$")[2]));//added franchiseId by Ashish for multiple frnachise in same city
        }
    });

    function getCookie(name) {
        var dc = document.cookie;
        var prefix = name + "=";
        var begin = dc.indexOf("; " + prefix);
        if (begin == -1) {
            begin = dc.indexOf(prefix);
            if (begin != 0) return null;
        } else {
            begin += 2;
        }
        var end = document.cookie.indexOf(";", begin);
        if (end == -1) {
            end = dc.length;
        }
        return unescape(dc.substring(begin + prefix.length, end));
    }
</script>
<script type="text/javascript">
    @*function AddProduct(shopStockId, itemId) {
        var _url = '@Url.Action("AddProductInShoppingCart", "Product")';
        //alert(_url);
        AddProductToShppingCart(shopStockId, itemId, _url);

        //AddProductToShppingCartWithoutQuantity(shopStockId, itemId, _url);
    }*@

</script>
<script type="text/javascript">
    //Start Yashaswi 1/6/2018 Show Selected City And PinCode and Area
    var _shopStockId;
    var _itemId;
    function Add_Product(shopStockId, itemId) {
        var _urlHome = '@Url.Action("AddProductInShoppingCart", "Product")';
        AddProductToShppingCart(shopStockId, itemId, _urlHome);
        //AddProductToShppingCartWithoutQuantity(shopStockId, itemId, _url);
    }


    function ShowPopUpForLocationAlert(shopStockId, itemId) {

        if (localStorage.getItem("IsLocConfirmed") != null) {
            Add_Product(shopStockId, itemId);
        }
        else {
            _shopStockId = shopStockId;
            _itemId = itemId;
            modalPinArea.style.display = "block";
        }
    }

    function LocPopupContinue() {
        CheckDeliveryPincodeLoc();

    }

    function LocPopupChange() {
        modalPinArea.style.display = "none";
        ShowMyModal();
    }

    function ShowMyModal() {
        ////    var modal_ = document.getElementById('myModal');
        ////    var span = document.getElementsByClassName("close")[0];
        modal.style.display = "block";
        if ($("#ddlSelectCity").val() !== null) {
            $("#lblarea").text('');
        }
        $("#ddlSelectCity").val(0);
        $("#txtSelectPincode").hide();
        $("#ddlSelectArea").hide();
        $("#txtSelectPincode").val('');
        $("#ddlSelectArea").val('');
        if (localStorage.getItem("CityID") != null) {
            $("#ddlSelectCity").val(localStorage.getItem("CityID"));
            $("#ddlSelectCity").change();
        }
        span.onclick = function () {
            modal.style.display = "none";
        }

    }

    function CheckDeliveryPincodeLoc() {
        var pincode = localStorage.getItem("SelectedPincode");

        if (pincode != '') {
            $.ajax({
                type: "POST",
                url: '@Url.Action("CheckDeliveryPincode", "PreviewItem", new { city = cityName, franchiseId = franchiseID })',////added franchiseId=franchiseID
                data: "{'pincode':" + pincode + "}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    if (response == true) {
                        localStorage.setItem("IsLocConfirmed", "Y");
                        modalPinArea.style.display = "none";
                        Add_Product(_shopStockId, _itemId);
                    }
                    else {
                        modaldivCheckLoc.style.display = "block";
                    }
                },
                failure: function (response) {

                },
                error: function (response) {

                }
            });
        }
    }
    //End Yashaswi
</script>
<script>
    $("#carouselMain div").first().addClass("active");
</script>
