@*<div ng-include="'_TopMenu.html'"></div>*@
@*@{
        Layout = "~/Views/Shared/_Layout11.cshtml";
    }*@
@{
    string cityName = "nagpur";
    int franchiseID = 0;////added
    if (Request.Cookies["CityCookie"] != null && Request.Cookies["CityCookie"].Value != "")
    {
        cityName = Request.Cookies["CityCookie"].Value.Split('$')[1].ToLower();
        franchiseID = Convert.ToInt32(Request.Cookies["CityCookie"].Value.Split('$')[2]);////added
    }
    List<ModelLayer.Models.ViewModel.BlockViewModel> blocks = new List<ModelLayer.Models.ViewModel.BlockViewModel>();
}
<link rel="icon" href="Assets/img/logo.png">
<!-- Bootstrap core CSS -->
<link href="~/assets/bootstrap/css/bootstrap.css" rel="stylesheet" />
<!-- Custom styles for this template -->
<link href="~/assets/css/Style.css" rel="stylesheet" />
<link href="~/assets/css/timeline.css" rel="stylesheet" />
<link href="~/assets/css/animate.css" rel="stylesheet" />


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="~/Scripts/jquery-2.1.3.min.js"></script>
<script src="~/Scripts/bootstrap.min.js"></script>
<script src="~/Assets/lib/angular/angular.js"></script>
<script src="~/Assets/lib/angular/angular-route.js"></script>
<script src="~/Assets/lib/angular/ngStorage.min.js"></script>
<script src="~/Assets/lib/angular/angular-sanitize.min.js"></script>
<script src="~/Assets/lib/angular/ui-bootstrap-tpls-0.10.0.js"></script>
@*<script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.10.0.js" type="text/javascript"></script>*@

<script src="~/App/app.js"></script>
<script src="~/App/routes.js"></script>
<script src="~/App/filter.js"></script>
<script src="~/App/Constant.js"></script>
<script src="~/App/Components/Home/HomeController.js"></script>
<script src="~/App/Components/Login/LoginController.js"></script>
<script src="~/App/Components/Product/ProductListController.js"></script>
<script src="~/App/Components/Product/CartController.js"></script>
<script src="~/App/Components/Product/ProductCartService.js"></script>
<script src="~/App/Components/PaymentProcess/PaymentProcessController.js"></script>
<script src="~/App/Components/ShippingAddress/ShippingAddressController.js"></script>
<script src="~/App/Components/GlobalSearch/GlobalSearchController.js"></script>
<div ng-app="gbApp" class="container-fluid gb-container-body">
    <style>
        .styleMain {
            position: relative;
        }

        .offer {
            display: block;
        }

        .no-offer {
            display: none;
        }

        .Offer_set {
            position: absolute;
            background: url('/../../Assets/img/offer.png') no-repeat 0 0;
            width: 50px;
            background-size: 50px !important;
            height: 30px;
            color: #fff;
            top: 3px;
        }

            .Offer_set .offer-set-text {
                padding-left: 16px;
                padding-top: 12px;
                line-height: 20px;
            }

        .offer_mrp {
            color: #777;
            padding: 5px 0px 5px 10px;
        }
		select{
			display:none;
		}
		.filter{
			display:none;
		}
    </style>
    <div class="row container-fluid" ng-controller="ProductListController">
        <div class="text-center" ng-show="waiting">
            <div class="row">
                <img src="~/content/images/ajax_loader.gif" style="width:50px;" />
            </div>
        </div>

        <div ng-show="show">
            <div class="row">
                <!-------------------------------------------- Start Left Panel -->
                <div id="gb-filter" class="col-xs-2 col-sm-2 col-md-2 col-lg-2 filter {{ 'gb-filter' }}">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 gb_totalcount">
                            <input type="text" style="width: 174px !important" ng-value="Products.length + ' Items'" readonly="readonly" disabled="disabled" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 gb_totalsearch">
                            <input type="text" style="width: 174px !important" ng-model="query" placeholder="Search" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 gb_totaldropdown">
                            <select ng-model="orderProp" style="border-radius: 0px; width: 174px !important; display:block; ">
                                <option value="ProductName"> Sort</option>
                                <option value="ProductName"> Alphabetically</option>
                                <option value="CreateDate"> Newest</option>
                                <option value="BasePrice"> Low to High</option>
                                <option value="-BasePrice"> High to Low</option>
                                <option value="-Offer"> Best Offer</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">

                    </div>
                </div>
                <!---------------------------------------------- End Left Panel -->
                <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10 newresponsive">
                    <div class="row gb-sub-menu-bar">
                        <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10 gb-sub-menu-bar gb-pagination">
                            <pagination page="currentPage" max-size="maxSize" total-items="totalItems" items-per-page="entryLimit" class="pagination-sm" boundary-links="true" rotate="false" num-pages="numPages"></pagination>
                        </div>
                    </div>
                    <div class="row">
                        <ul>
                            <li ng-repeat="product in Products | filter:query | orderBy:orderProp | startFrom:(currentPage-1)*entryLimit | limitTo:entryLimit " class="{{ layout }}" style="cursor:default;">
                                <div class="{{Offer_set}}"><span class="offer-set-text" ng-bind="product.Offer | num"></span><span ng-bind="'%'"></span></div>
                                <div class="row">
                                   
                                    <a href="/{{ city }}/{{franchiseID}}/{{ product.URLPName }}/{{product.ProductID}}/{{product.ShopStockID}}/{{product.ShopID}}/stock-preview">   @*////added {{franchiseID}}*@
                                        <img ng-src="{{ product.ImgUrl }}" id="img1" class="{{ imgView }}" onerror="this.src = '../../Content/Images/no_image.png'" alt="{{ product.ProductName }}">
                                        <p style="padding-top:10px; padding-bottom:0px; height:40px;" ng-bind="product.ProductName"></p>
                                        <div class="{{ product.OfferClass }} offer_mrp">
                                            <span ng-bind="'MRP :'"></span><del style="color:red;" ng-bind="product.MRP"></del> <b ng-bind="product.RetailerRate"></b>
                                        </div>
                                    </a>
</div>


                                <div class="row">
                                    <div class="{{ tileHeader }} {{ product.AddedInCart }}">
                                        <button class="{{ tileHeaderRs }}" ng-bind="product.BuyAmount"></button>
                                        <select class="{{ tileHeaderSelectVarient }}" style="float:right;" ng-init="item=product.ShopStockByVarients[0]" ng-options="ShopStockByVarient as ShopStockByVarient.RetailerRate  + '/' + ShopStockByVarient.ProductVarientSize
                                                                               for ShopStockByVarient in product.ShopStockByVarients"
                                                ng-model="item" ng-change="changeVarient(product, item)"></select>
                                    </div>
                                </div>
                                <div class="row" style="margin-top:-6px;">
                                    <div class="{{ tileBottom }} {{ product.AddedInCart }}">
                                        <button id="Minus{{ product.ProductID }}" ng-click="ChangeQty('Minus', product)"><span ng-bind="'-'"></span></button>
                                        <!--<input type="text" readonly="readonly" value="{{product.BuyQty}}" />-->
										<button  style="cursor:default;"><span ng-bind="product.BuyQty"></span></button>
                                        <button id="Plus{{ product.ProductID }}" ng-click="ChangeQty('Plus', product)"><span ng-bind="'+'"></span></button>
                                        @if (Session["UID"] != null)
                                        {
                                        <button class="gb-addProduct" id="{{ product.ProductID }}" ng-click="AddToCart(product)"><span ng-bind="'Add'"></span></button>
                                        }
                                        else
                                        {
											<a  class="gb-addProduct btn btn-xs"  href="@Url.RouteUrl("Login", new { city = cityName, franchiseId = franchiseID })"><span style="color:#ffffff; height:24px; line-height:24px;" ng-bind="'Add'"></span></a>   @*////added franchiseId = franchiseID *@
                                        }
                                        
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div>
                        <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10  gb-sub-menu-bar gb-pagination">
                            <pagination page="currentPage" max-size="maxSize" total-items="totalItems" items-per-page="entryLimit" class="pagination-sm" boundary-links="true" rotate="false" num-pages="numPages"></pagination>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

