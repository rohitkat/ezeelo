<style>
    .newlinkpadding {
        padding-left: 10px;
        padding-right: 10px;
    }

    .shotnamespan {
        width: 200px;
        height: 50px;
        float: left;
        overflow: hidden;
        line-height: 15px;
    }

    .shotimage {
        float: left;
        width: 50px;
        height: 50px;
    }

    .linkbuy {
        float: left;
        width: 30px;
        padding-left: 10px;
        font-weight: 700;
        height: 50px;
        font-size: 15px;
    }

    .removebebutton {
        float: left;
        width: 20px;
        margin-left: 25px;
    }

    .shotlistmaindiv {
        padding-top: 30px;
        width: 100%;
        height: 50px;
    }
</style>
@using System.Text.RegularExpressions;
@{
    string cityName = "";
    int franchiseID = 0;////added
    if (Request.Cookies["CityCookie"] != null && Request.Cookies["CityCookie"].Value != "")
    {
        cityName = Request.Cookies["CityCookie"].Value.Split('$')[1].ToLower();
        franchiseID = Convert.ToInt32(Request.Cookies["CityCookie"].Value.Split('$')[2]);////added
    }

    if (Request.Cookies["ShortListCookie"] != null)
    {
        string cookShortListItems = Request.Cookies["ShortListCookie"].Value;
        string[] individualItemCookie = cookShortListItems.Split(',');
        <ul style="height:217px;overflow-y:auto;">
            @foreach (var item in individualItemCookie)
            {
                if (item.Split('$').Length > 3)
                {
                    string ProductImage = item.Split('$')[3];
                    string ProductName = Regex.Replace(item.Split('$')[2].Substring(0, Math.Min(item.Split('$')[2].Length, 30)), @"[\/\\#,+()$~%.':*?<>{} ]", "-").Replace("&", "and").ToLower();
                    <li>
                        <div class="shotlistmaindiv">
                            <a href="@Url.RouteUrl("preview-stock", new { itemID = item.Split('$')[0], itemName = ProductName, shopID = 0, shopStockID = item.Split('$')[1], city = cityName, franchiseId = franchiseID })">
                                @*////added franchiseId=franchiseID*@
                                <div>
                                    <img src="@Url.Content(string.IsNullOrEmpty(ProductImage) ? "/Content/Images/no_image.png" : ProductImage)" class="shotimage" />
                                    <span class="shotnamespan">@Html.Label("lblName", item.Split('$')[2].ToString())</span>
                                    @Html.Hidden("hdnRemoveItemID", item.Split('$')[1])
                                </div>
                            </a>
                            @Html.RouteLink("View", "preview-stock", new { itemID = item.Split('$')[0], itemName = ProductName, shopID = 0, shopStockID = item.Split('$')[1], city = cityName, franchiseId = franchiseID }, new { @class = "link linkbuy" }) @*////added franchiseId=franchiseID*@
                            <a href="#" id="anchShortListDeleteItem" title="Remove From Shortlist" onclick="RemoveShortListItem(@item.Split('$')[1])">
                                <img src="~/Content/Images/cross.png" class="removebebutton" style="float: left;" />
                            </a>
                        </div>
                    </li>
                }

            }
        </ul>
    }
    else
    {
        <p> your shortlist is empty </p>
    }


}

<script type="text/javascript">
    function RemoveShortListItem(shopStockID) {
        $.ajax({
            type: "POST",
            url: '@Url.Action("RemoveShortListItem", "PreviewItem")',
            data: "{'shopStockID':" + shopStockID + "}",
            contentType: "application/json; charset = utf-8",
            dataType: "json",
            success: function (response) {
                $('#ShortListDiv').load('@Url.Action("ShortList", "Shortlist")');
                var a = getCookie("ShortListCookie");
                if (a != null) {
                    $("[id*=spanShortlistCount]").text(a.split(',').length);
                }
                else {
                    $("[id*=spanShortlistCount]").text(0);
                }
                $("input[value = " + shopStockID + "]").parent().find(".fa fa-star").removeClass("activeListNew");
            },
            failure: function (response) {
            },
            error: function (response) {
            }
        });
    }

    function getCookie(name) {
        var dc = document.cookie;
        var prefix = name + "=";
        var begin = dc.indexOf("; " + prefix);
        if (begin == -1) {
            begin = dc.indexOf(prefix);
            if (begin != 0) return null;
        } else {
            begin += 2;
        }
        var end = document.cookie.indexOf(";", begin);
        if (end == -1) {
            end = dc.length;
        }
        return unescape(dc.substring(begin + prefix.length, end));
    }
</script>