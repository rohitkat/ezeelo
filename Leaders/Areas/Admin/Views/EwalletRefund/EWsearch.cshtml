@model IEnumerable<ModelLayer.Models.ViewModel.MLMUserViewModel>

@{
    ViewBag.Title = "EWsearch";
    Layout = "~/Views/Shared/_LeadersLayout.cshtml";
}


<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="~/Scripts/jquery-1.12.4.js"></script>

    <link href="//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
    <script src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>


    <script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
    <link href="~/Content/css/datepicker.css" rel="stylesheet" />
    <link href="~/Content/css/jquery-ui-1.8.21.custom.css" rel="stylesheet" />


    <style>
        #pageloaddiv {
            position: fixed;
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
            z-index: 1000;
            background: url('../../Content/Images/lg.palette-rotating-ring-loader.gif') no-repeat center center;
            background-size: 100px;
            display: none;
        }
    </style>
</head>

<body>
    <br />
    <div class="container">


        <div class="LeadersTable">
            @*@{Html.RenderAction("PartialLeadersOrder");}*@

        </div>
        <div class="FilterTable">

        </div>
        <br />
        <div class="col-2">
            <input type="datetime" id="min" name="min" readonly="readonly" placeholder="Start Date">
        </div>
        <div class="col-2">
            <input type="datetime" id="max" name="max" readonly="readonly" placeholder="End Date">
        </div>
        <div class="col-2">
            <input type="button" class="btn-primary" value="Search" name="btnSearch" id="btnSearch" />
        </div>
        <div class="col-2">
            <input type="button" name="btnExcel" id="btnExcel" value="Export To Excel" class="btn btn-primary" />
        </div>


    </div>

    <div id="pageloaddiv"></div>
</body>

</html>


<script>

    $(document).ready(function () {
        $("#pageloaddiv").css('display', 'block');
        $.ajax({
            type: "GET",
            url: "@Url.Action("PartialUserList", "EWalletRefund")",
            contentType: "application/json; charset=utf-8",
            //data: '{"startDate":"' + $("#min").val() + '","endDate":"' + $("#max").val() + '"}',
            data: {},
            dataType: "html",

            success: function (data, status, xhr) {
               debugger

                $(".LeadersTable").html(data);

                $("#pageloaddiv").css('display', 'none');
            },
            error: function (xhr, status, error) {
                $("#dataDiv").html("data: " + status + " " + error + " " + xhr.status + " " + xhr.statusText)

                $("#pageloaddiv").css('display', 'none');
            }

        });

    });



    $("#btnSearch").click(function () {


        $("#pageloaddiv").css('display', 'block');

        $.ajax({
            type: "POST",
            url: "@Url.Action("ListBetweenDate", "EWalletRefund")",
            contentType: "application/json; charset=utf-8",
            data: '{"startDate":"' + $("#min").val() + '","endDate":"' + $("#max").val() + '"}',
            dataType: "html",

            success: function (data, status, xhr) {

                $(".LeadersTable").empty();


                $(".FilterTable").html(data);

                $("#pageloaddiv").css('display', 'none');
            },
            error: function (xhr, status, error) {
                $("#dataDiv").html("data: " + status + " " + error + " " + xhr.status + " " + xhr.statusText)
                $("#pageloaddiv").css('display', 'none');
            }
        });

    });

</script>
<script>


    $('#btnExcel').click(function () {
        var sDate = $("#min").val();
        var eDate = $("#max").val();

        window.location.href = "/EWalletRefund/ExportToExcel?toDate=" + eDate + "&fromDate=" + sDate;

    })

</script>

<script type="text/javascript">
    $(document).ready(function () {
        $("#min").datepicker();
        $("#max").datepicker();

    });
</script>

